!function(){"use strict";var e={5752:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(9628),i=n(1313),s=n(4594),a=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),c=new i.ErrorFactory("app","Firebase",a),u="[DEFAULT]",l=[],d=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=i.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){l.push(e),setTimeout((function(){return e(null)}),0)},removeAuthTokenListener:function(e){l=l.filter((function(t){return t!==e}))}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var o=r[n],i=0,s=Object.keys(e.services_[o]);i<s.length;i++){var a=s[i];t.push(e.services_[o][a])}return Promise.all(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))})).then((function(){e.isDeleted_=!0,e.services_={}}))},e.prototype._getService=function(e,t){if(void 0===t&&(t=u),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==u?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=u),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;i.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(l.forEach((function(e){t.INTERNAL.addAuthTokenListener(e)})),l=[])},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},e}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p="6.6.2",h=new s.Logger("@firebase/app");
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(i.isBrowser()&&void 0!==self.firebase){h.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var f=self.firebase.SDK_VERSION;f&&f.indexOf("LITE")>=0&&h.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){var t=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t={},n={},r={},o={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var s=r;void 0===s.name&&(s.name=u);var a=s.name;if("string"!=typeof a||!a)throw c.create("bad-app-name",{appName:String(a)});if(i.contains(t,a))throw c.create("duplicate-app",{appName:a});var d=new e(n,s,o);return t[a]=d,l(d,"create"),d},app:s,apps:null,SDK_VERSION:p,INTERNAL:{registerService:function(t,u,l,d,p){if(void 0===p&&(p=!1),n[t])return h.debug("There were multiple attempts to register service "+t+"."),o[t];function f(e){if(void 0===e&&(e=s()),"function"!=typeof e[t])throw c.create("invalid-app-argument",{appName:t});return e[t]()}return n[t]=u,d&&(r[t]=d,a().forEach((function(e){d("create",e)}))),void 0!==l&&i.deepExtend(f,l),o[t]=f,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,p?e:[])},f},removeApp:function(e){l(t[e],"delete"),delete t[e]},factories:n,useAsService:d}};function s(e){if(e=e||u,!i.contains(t,e))throw c.create("no-app",{appName:e});return t[e]}function a(){return Object.keys(t).map((function(e){return t[e]}))}function l(e,t){for(var o=0,i=Object.keys(n);o<i.length;o++){var s=d(e,i[o]);if(null===s)return;r[s]&&r[s](t,e)}}function d(e,t){return"serverAuth"===t?null:t}return o.default=o,Object.defineProperty(o,"apps",{get:a}),s.App=e,o}(d);return t.INTERNAL=o.__assign({},t.INTERNAL,{createFirebaseNamespace:e,extendNamespace:function(e){i.deepExtend(t,e)},createSubscribe:i.createSubscribe,ErrorFactory:i.ErrorFactory,deepExtend:i.deepExtend}),t}(),g=m.initializeApp;m.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.isNode()&&h.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),g.apply(void 0,e)};var y=m;t.default=y,t.firebase=y},9628:function(e,t,n){n.r(t),n.d(t,{__assign:function(){return i},__asyncDelegator:function(){return b},__asyncGenerator:function(){return v},__asyncValues:function(){return _},__await:function(){return y},__awaiter:function(){return l},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return o},__generator:function(){return d},__importDefault:function(){return k},__importStar:function(){return S},__makeTemplateObject:function(){return w},__metadata:function(){return u},__param:function(){return c},__read:function(){return f},__rest:function(){return s},__spread:function(){return m},__spreadArrays:function(){return g},__values:function(){return h}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function a(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function p(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=o[e](t)).value instanceof y?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function k(e){return e&&e.__esModule?e:{default:e}}},4594:function(e,t,n){n.r(t),n.d(t,{LogLevel:function(){return r},Logger:function(){return a},setLogLevel:function(){return c}});
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var r,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(r={}));var i=r.INFO,s=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case r.DEBUG:case r.VERBOSE:console.log.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case r.INFO:console.info.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case r.WARN:console.warn.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case r.ERROR:console.error.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},a=function(){function e(e){this.name=e,this._logLevel=i,this._logHandler=s,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.ERROR].concat(e))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function c(e){o.forEach((function(t){t.logLevel=e}))}},2726:function(e,t,n){n.r(t),n.d(t,{isSupported:function(){return $},registerMessaging:function(){return F}});var r=n(5752),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},o(e,t)};function i(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};function a(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var l,d,p,h=n(1313),f=((l={})["only-available-in-window"]="This method is available in a Window context.",l["only-available-in-sw"]="This method is available in a service worker context.",l["should-be-overriden"]="This method should be overriden by extended classes.",l["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",l["permission-default"]="The required permissions were not granted and dismissed instead.",l["permission-blocked"]="The required permissions were not granted and blocked instead.",l["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",l["notifications-blocked"]="Notifications have been blocked.",l["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",l["sw-registration-expected"]="A service worker registration was the expected input.",l["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",l["invalid-saved-token"]="Unable to access details of the saved token.",l["sw-reg-redundant"]="The service worker being used for push was made redundant.",l["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",l["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",l["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",l["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",l["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",l["token-update-no-token"]="FCM returned no token when updating the user to push.",l["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",l["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",l["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",l["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",l["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",l["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",l["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",l["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",l["failed-to-delete-token"]="Unable to delete the currently saved token.",l["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",l["bad-scope"]="The service worker scope must be a string with at least one character.",l["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",l["bad-subscription"]="The subscription must be a valid PushSubscription.",l["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",l["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",l["failed-delete-vapid-key"]="The VAPID key could not be deleted.",l["invalid-public-vapid-key"]="The public VAPID key must be a string.",l["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",l["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",l),m=new h.ErrorFactory("messaging","Messaging",f),g=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),y="https://fcm.googleapis.com";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function v(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),o=0;o<e.byteLength;o++)if(n.getUint8(o)!==r.getUint8(o))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}(t)))}function _(e){return b(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.TYPE_OF_MSG="firebase-messaging-msg-type",e.DATA="firebase-messaging-msg-data"}(d||(d={})),function(e){e.PUSH_MSG_RECEIVED="push-msg-received",e.NOTIFICATION_CLICKED="notification-clicked"}(p||(p={}));var w=function(){function e(){}return e.prototype.getToken=function(e,t,n){return a(this,void 0,void 0,(function(){var r,o,i,s,a,u,l,d,p;return c(this,(function(c){switch(c.label){case 0:r=_(t.getKey("p256dh")),o=_(t.getKey("auth")),i="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+r+"&encryption_auth="+o,v(n.buffer,g.buffer)||(s=_(n),i+="&application_pub_key="+s),(a=new Headers).append("Content-Type","application/x-www-form-urlencoded"),u={method:"POST",headers:a,body:i},c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch(y+"/fcm/connect/subscribe",u)];case 2:return[4,c.sent().json()];case 3:return l=c.sent(),[3,5];case 4:throw d=c.sent(),m.create("token-subscribe-failed",{errorInfo:d});case 5:if(l.error)throw p=l.error.message,m.create("token-subscribe-failed",{errorInfo:p});if(!l.token)throw m.create("token-subscribe-no-token");if(!l.pushSet)throw m.create("token-subscribe-no-push-set");return[2,{token:l.token,pushSet:l.pushSet}]}}))}))},e.prototype.updateToken=function(e,t,n,r,o){return a(this,void 0,void 0,(function(){var i,s,a,u,l,d,p,h,f;return c(this,(function(c){switch(c.label){case 0:i=_(r.getKey("p256dh")),s=_(r.getKey("auth")),a="push_set="+n+"&token="+t+"&authorized_entity="+e+"&endpoint="+r.endpoint+"&encryption_key="+i+"&encryption_auth="+s,v(o.buffer,g.buffer)||(u=_(o),a+="&application_pub_key="+u),(l=new Headers).append("Content-Type","application/x-www-form-urlencoded"),d={method:"POST",headers:l,body:a},c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch(y+"/fcm/connect/subscribe",d)];case 2:return[4,c.sent().json()];case 3:return p=c.sent(),[3,5];case 4:throw h=c.sent(),m.create("token-update-failed",{errorInfo:h});case 5:if(p.error)throw f=p.error.message,m.create("token-update-failed",{errorInfo:f});if(!p.token)throw m.create("token-update-no-token");return[2,p.token]}}))}))},e.prototype.deleteToken=function(e,t,n){return a(this,void 0,void 0,(function(){var r,o,i,s,a,u;return c(this,(function(c){switch(c.label){case 0:r="authorized_entity="+e+"&token="+t+"&pushSet="+n,(o=new Headers).append("Content-Type","application/x-www-form-urlencoded"),i={method:"POST",headers:o,body:r},c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch(y+"/fcm/connect/unsubscribe",i)];case 2:return[4,c.sent().json()];case 3:if((s=c.sent()).error)throw a=s.error.message,m.create("token-unsubscribe-failed",{errorInfo:a});return[3,5];case 4:throw u=c.sent(),m.create("token-unsubscribe-failed",{errorInfo:u});case 5:return[2]}}))}))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k="undefined",E="fcm_token_object_Store";function T(){var e=indexedDB.open(k);e.onerror=function(e){},e.onsuccess=function(t){!function(e){if(e.objectStoreNames.contains(E)){var t=e.transaction(E).objectStore(E),n=new w,r=t.openCursor();r.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},r.onsuccess=function(){var t=r.result;if(t){var o=t.value;n.deleteToken(o.fcmSenderId,o.fcmToken,o.fcmPushSet),t.continue()}else e.close(),indexedDB.deleteDatabase(k)}}}(e.result)}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction((function(t){return t.get(e)}))},e.prototype.getIndex=function(e,t){return this.createTransaction((function(n){return n.index(e).get(t)}))},e.prototype.put=function(e){return this.createTransaction((function(t){return t.put(e)}),"readwrite")},e.prototype.delete=function(e){return this.createTransaction((function(t){return t.delete(e)}),"readwrite")},e.prototype.closeDatabase=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}}))}))},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),a(this,void 0,void 0,(function(){var n,r,o,i;return c(this,(function(s){switch(s.label){case 0:return[4,this.getDb()];case 1:return n=s.sent(),r=n.transaction(this.objectStoreName,t),o=r.objectStore(this.objectStoreName),[4,C(e(o))];case 2:return i=s.sent(),[2,new Promise((function(e,t){r.oncomplete=function(){e(i)},r.onerror=function(){t(r.error)}}))]}}))}))},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise((function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}}))),this.dbPromise},e}();function C(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_token_details_db",t.dbVersion=3,t.objectStoreName="fcm_token_object_Store",t}return i(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:T();case 2:var r,o=(r=e.transaction.objectStore(this.objectStoreName)).openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=s({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=S(t.vapidKey)),"string"==typeof t.auth&&(n.auth=S(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=S(t.p256dh).buffer),e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){if(!e)throw m.create("bad-token");return O({fcmToken:e}),[2,this.getIndex("fcmToken",e)]}))}))},t.prototype.getTokenDetailsFromSWScope=function(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){if(!e)throw m.create("bad-scope");return O({swScope:e}),[2,this.get(e)]}))}))},t.prototype.saveTokenDetails=function(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){if(!e.swScope)throw m.create("bad-scope");if(!e.vapidKey)throw m.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw m.create("bad-subscription");if(!e.fcmSenderId)throw m.create("bad-sender-id");if(!e.fcmToken)throw m.create("bad-token");if(!e.fcmPushSet)throw m.create("bad-push-set");return O(e),[2,this.put(e)]}))}))},t.prototype.deleteToken=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(m.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw m.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}}))}))},t}(x);function O(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw m.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw m.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw m.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw m.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw m.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw m.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw m.create("bad-sender-id");if(e.fcmPushSet&&("string"!=typeof e.fcmPushSet||0===e.fcmPushSet.length))throw m.create("bad-push-set")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return i(t,e),t.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw m.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}}))}))},t.prototype.saveVapidDetails=function(e,t){return a(this,void 0,void 0,(function(){var n;return c(this,(function(r){if("string"!=typeof e||0===e.length)throw m.create("bad-scope");if(null===t||65!==t.length)throw m.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]}))}))},t.prototype.deleteVapidDetails=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw m.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}}))}))},t}(x),R="messagingSenderId",M=function(){function e(e){var t=this;if(!e.options[R]||"string"!=typeof e.options[R])throw m.create("bad-sender-id");this.messagingSenderId=e.options[R],this.tokenDetailsModel=new I,this.vapidDetailsModel=new D,this.iidModel=new w,this.app=e,this.INTERNAL={delete:function(){return t.delete()}}}return e.prototype.getToken=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,o;return c(this,(function(i){switch(i.label){case 0:if("denied"===(e=this.getNotificationPermission_()))throw m.create("notifications-blocked");return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=i.sent(),[4,this.getPublicVapidKey_()];case 2:return n=i.sent(),[4,this.getPushSubscription(t,n)];case 3:return r=i.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return(o=i.sent())?[2,this.manageExistingToken(t,r,n,o)]:[2,this.getNewToken(t,r,n)]}}))}))},e.prototype.manageExistingToken=function(e,t,n,r){return a(this,void 0,void 0,(function(){var o;return c(this,(function(i){switch(i.label){case 0:return o=function(e,t,n){if(!n.vapidKey||!v(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,o=v(e.getKey("auth"),n.auth),i=v(e.getKey("p256dh"),n.p256dh);return r&&o&&i}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n,r),o?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]:[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return i.sent(),[2,this.getNewToken(e,t,n)]}}))}))},e.prototype.updateToken=function(e,t,n,r){return a(this,void 0,void 0,(function(){var o,i,s;return c(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,t,n)];case 1:return o=a.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:o,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return a.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return a.sent(),[2,o];case 4:return s=a.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw a.sent(),s;case 6:return[2]}}))}))},e.prototype.getNewToken=function(e,t,n){return a(this,void 0,void 0,(function(){var r,o;return c(this,(function(i){switch(i.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,t,n)];case 1:return r=i.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return i.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return i.sent(),[2,r.token]}}))}))},e.prototype.deleteToken=function(e){return a(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(t=r.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}}))}))},e.prototype.deleteTokenFromDB=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.iidModel.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)];case 2:return n.sent(),[2]}}))}))},e.prototype.getPushSubscription=function(e,t){return e.pushManager.getSubscription().then((function(n){return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})}))},e.prototype.requestPermission=function(){throw m.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw m.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw m.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw m.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw m.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw m.create("only-available-in-sw")},e.prototype.delete=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}}))}))},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getIidModel=function(){return this.iidModel},e}();var P="FCM_MSG",A=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",(function(e){n.onPush(e)})),self.addEventListener("pushsubscriptionchange",(function(e){n.onSubChange(e)})),self.addEventListener("notificationclick",(function(e){n.onNotificationClick(e)})),n}return i(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o,i,s;return c(this,(function(a){switch(a.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return a.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return o=a.sent(),i=n.actions,s=Notification.maxActions,i&&s&&i.length>s&&console.warn("This browser only supports "+s+" actions.The remaining actions will not be displayed."),[2,o.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return a.sent(),[2];case 5:return[2]}}))}))},t.prototype.onSubChange_=function(e){return a(this,void 0,void 0,(function(){var e,t,n,r;return c(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=o.sent(),[3,3];case 2:throw t=o.sent(),m.create("unable-to-resubscribe",{errorInfo:t});case 3:return o.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return o.sent(),[3,8];case 5:return n=o.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(r=o.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw o.sent(),n;case 8:return[2]}}))}))},t.prototype.onNotificationClick_=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o;return c(this,(function(i){switch(i.label){case 0:return e.notification&&e.notification.data&&e.notification.data[P]?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(t=e.notification.data[P]).notification&&(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=i.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=i.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=i.sent(),i.label=5;case 5:return r?(delete t.notification,delete t.fcmOptions,o=L(p.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,o)]):[2]}}))}))},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=s({},e.notification);return n.data=s({},e.notification.data,((t={})[P]=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw m.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o;return c(this,(function(i){switch(i.label){case 0:return t=new URL(e,self.location.href).href,[4,N()];case 1:for(n=i.sent(),r=null,o=0;o<n.length;o++)if(new URL(n[o].url,self.location.href).href===t){r=n[o];break}return[2,r]}}))}))},t.prototype.attemptToMessageClient_=function(e,t){return a(this,void 0,void 0,(function(){return c(this,(function(n){if(!e)throw m.create("no-window-client-to-msg");return e.postMessage(t),[2]}))}))},t.prototype.hasVisibleClients_=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,N()];case 1:return[2,e.sent().some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))]}}))}))},t.prototype.sendMessageToWindowClients_=function(e){return a(this,void 0,void 0,(function(){var t,n,r=this;return c(this,(function(o){switch(o.label){case 0:return[4,N()];case 1:return t=o.sent(),n=L(p.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map((function(e){return r.attemptToMessageClient_(e,n)})))];case 2:return o.sent(),[2]}}))}))},t.prototype.getSWRegistration_=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){return[2,self.registration]}))}))},t.prototype.getPublicVapidKey_=function(){return a(this,void 0,void 0,(function(){var e,t;return c(this,(function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw m.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,g]:[2,t]}}))}))},t}(M);function N(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function L(e,t){var n;return(n={})[d.TYPE_OF_MSG]=e,n[d.DATA]=t,n
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var j=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=(0,h.createSubscribe)((function(e){n.messageObserver=e})),n.onTokenRefreshInternal=(0,h.createSubscribe)((function(e){n.tokenRefreshObserver=e})),n.setupSWMessageListener_(),n}return i(t,e),t.prototype.requestPermission=function(){return a(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?m.create("permission-blocked"):m.create("permission-default")}}))}))},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw m.create("sw-registration-expected");if(null!=this.registrationToUse)throw m.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw m.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw m.create("use-public-key-before-get-token");var t=S(e);if(65!==t.length)throw m.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise((function(n,r){if(t)if("activated"!==t.state)if("redundant"!==t.state){var o=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(m.create("sw-reg-redundant"))}t.removeEventListener("statechange",o)};t.addEventListener("statechange",o)}else r(m.create("sw-reg-redundant"));else n(e);else r(m.create("no-sw-in-reg"))}))},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch((function(e){throw m.create("failed-serviceworker-registration",{browserErrorMessage:e.message})})).then((function(t){return e.waitForRegistrationToActivate_(t).then((function(){return e.registrationToUse=t,t.update(),t}))})))},t.prototype.getPublicVapidKey_=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,g]}))}))},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){if(t.data&&t.data[d.TYPE_OF_MSG]){var n=t.data;switch(n[d.TYPE_OF_MSG]){case p.PUSH_MSG_RECEIVED:case p.NOTIFICATION_CLICKED:var r=n[d.DATA];e.messageObserver&&e.messageObserver.next(r)}}}),!1)},t}(M);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function F(e){var t={isSupported:$};e.INTERNAL.registerService("messaging",(function(e){if(!$())throw m.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new A(e):new j(e)}),t)}function $(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}F(r.default)},1313:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(8713),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},a=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],o=0;o<e.length;o+=3){var i=e[o],s=o+1<e.length,a=s?e[o+1]:0,c=o+2<e.length,u=c?e[o+2]:0,l=i>>2,d=(3&i)<<4|a>>4,p=(15&a)<<2|u>>6,h=63&u;c||(h=64,s||(p=64)),r.push(n[l],n[d],n[p],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){var i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){var s=((7&o)<<18|(63&(i=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{i=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],o=0;o<e.length;){var i=n[e.charAt(o++)],s=o<e.length?n[e.charAt(o)]:0,a=++o<e.length?n[e.charAt(o)]:64,c=++o<e.length?n[e.charAt(o)]:64;if(++o,null==i||null==s||null==a||null==c)throw Error();var u=i<<2|s>>4;if(r.push(u),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==c){var d=a<<6&192|c;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=function(e){try{return c.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var h="FirebaseError",f=function(e){function t(n,r){var o=e.call(this,r)||this;return o.code=n,o.name=h,Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,m.prototype.create),o}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},o=this.service+"/"+e,i=this.errors[e],s=i?function(e,t){return e.replace(g,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}(i,r):"Error",a=this.serviceName+": "+s+" ("+o+").",c=new f(o,a),u=0,l=Object.keys(r);u<l.length;u++){var d=l[u];"_"!==d.slice(-1)&&(d in c&&console.warn('Overwriting FirebaseError base field "'+d+'" can cause unexpected behavior.'),c[d]=r[d])}return c},e}();var g=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(e){return JSON.parse(e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var v=function(e){var t={},n={},r={},o="";try{var i=e.split(".");t=y(u(i[0])||""),n=y(u(i[1])||""),o=i[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:o}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var b=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var o=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(o<<1|o>>>31)}var i,s,a=this.chain_[0],c=this.chain_[1],u=this.chain_[2],l=this.chain_[3],d=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^c&(u^l),s=1518500249):(i=c^u^l,s=1859775393):r<60?(i=c&u|l&(c|u),s=2400959708):(i=c^u^l,s=3395469782);o=(a<<5|a>>>27)+i+d+s+n[r]&4294967295;d=l,l=u,u=4294967295&(c<<30|c>>>2),c=a,a=o}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,o=this.buf_,i=this.inbuf_;r<t;){if(0===i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(o[i]=e.charCodeAt(r),++r,++i===this.blockSize){this.compress_(o),i=0;break}}else for(;r<t;)if(o[i]=e[r],++r,++i===this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[n]>>o&255,++r;return e},e}();var _=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,o=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o in e&&"function"==typeof e[o])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(e){}})),this.observers.push(r),i},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function w(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=e+" failed: ";return o+=r+" argument "}t.CONSTANTS=o,t.Deferred=d,t.ErrorFactory=m,t.FirebaseError=f,t.Sha1=b,t.assert=i,t.assertionError=s,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=c,t.base64Decode=u,t.base64Encode=function(e){var t=a(e);return c.encodeByteArray(t,!0)},t.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new _(e,t);return n.subscribe.bind(n)},t.decode=v,t.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=S,t.getUA=p,t.isAdmin=function(e){var t=v(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=v(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=v(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,o=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),o=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},t.issuedAtTime=function(e){var t=v(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=y,t.map=function(e,t,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,o=Object.entries(e);r<o.length;r++){var i=o[r];n(i[0],i[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<e.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(e.charCodeAt(r)-56320)}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var o;if(r<t?o="at least "+t:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(S(e,t,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(e,t,r)+"must be a valid firebase namespace.")}},8713:function(e,t,n){n.r(t),n.d(t,{__assign:function(){return i},__asyncDelegator:function(){return b},__asyncGenerator:function(){return v},__asyncValues:function(){return _},__await:function(){return y},__awaiter:function(){return l},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return o},__generator:function(){return d},__importDefault:function(){return k},__importStar:function(){return S},__makeTemplateObject:function(){return w},__metadata:function(){return u},__param:function(){return c},__read:function(){return f},__rest:function(){return s},__spread:function(){return m},__spreadArrays:function(){return g},__values:function(){return h}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function a(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function p(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=o[e](t)).value instanceof y?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function k(e){return e&&e.__esModule?e:{default:e}}},1750:function(e,t,n){n.r(t),n.d(t,{Breadcrumbs:function(){return Yo},BrowserClient:function(){return Fr},BrowserProfilingIntegration:function(){return _d},BrowserTracing:function(){return Fl},Dedupe:function(){return ti},Feedback:function(){return gl},FunctionToString:function(){return dt},GlobalHandlers:function(){return go},HttpContext:function(){return Qo},Hub:function(){return ve},InboundFilters:function(){return mt},Integrations:function(){return Sd},LinkedErrors:function(){return Xo},ModuleMetadata:function(){return hr},Replay:function(){return ju},SDK_VERSION:function(){return me},Scope:function(){return he},TryCatch:function(){return So},WINDOW:function(){return wr},addBreadcrumb:function(){return ze},addEventProcessor:function(){return _r},addGlobalEventProcessor:function(){return re},addIntegration:function(){return at},addTracingExtensions:function(){return pn},captureEvent:function(){return We},captureException:function(){return Be},captureMessage:function(){return Ue},captureUserFeedback:function(){return hi},chromeStackLineParser:function(){return Jr},close:function(){return et},configureScope:function(){return He},continueTrace:function(){return vn},createTransport:function(){return ar},createUserFeedbackEnvelope:function(){return jr},defaultIntegrations:function(){return si},defaultRequestInstrumentationOptions:function(){return bl},defaultStackLineParsers:function(){return so},defaultStackParser:function(){return ao},eventFromException:function(){return Mr},eventFromMessage:function(){return Pr},exceptionFromError:function(){return Cr},extractTraceparentData:function(){return Kt},flush:function(){return Qe},forceLoad:function(){return ui},geckoStackLineParser:function(){return Qr},getActiveSpan:function(){return yn},getActiveTransaction:function(){return Vt},getClient:function(){return nt},getCurrentHub:function(){return we},getCurrentScope:function(){return rt},getHubFromCarrier:function(){return Te},init:function(){return ai},instrumentOutgoingRequests:function(){return _l},lastEventId:function(){return tt},makeBrowserOfflineTransport:function(){return Gl},makeFetchTransport:function(){return Hr},makeMain:function(){return _e},makeMultiplexedTransport:function(){return Qn},makeXHRTransport:function(){return qr},metrics:function(){return Mn},onLoad:function(){return li},onProfilingStartRouteTransaction:function(){return yd},opera10StackLineParser:function(){return ro},opera11StackLineParser:function(){return io},setContext:function(){return qe},setExtra:function(){return Ke},setExtras:function(){return Ve},setMeasurement:function(){return wn},setTag:function(){return Ye},setTags:function(){return Ge},setUser:function(){return Je},showReportDialog:function(){return ci},spanStatusfromHttpCode:function(){return Qt},startInactiveSpan:function(){return gn},startSpan:function(){return fn},startSpanManual:function(){return mn},startTransaction:function(){return Ze},trace:function(){return hn},winjsStackLineParser:function(){return to},withScope:function(){return Xe},wrap:function(){return di}});var r={};n.r(r),n.d(r,{FunctionToString:function(){return dt},InboundFilters:function(){return mt},LinkedErrors:function(){return Et}});var o={};n.r(o),n.d(o,{Breadcrumbs:function(){return Yo},Dedupe:function(){return ti},GlobalHandlers:function(){return go},HttpContext:function(){return Qo},LinkedErrors:function(){return Xo},TryCatch:function(){return So}});const i=Object.prototype.toString;function s(e){switch(i.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return g(e,Error)}}function a(e,t){return i.call(e)===`[object ${t}]`}function c(e){return a(e,"ErrorEvent")}function u(e){return a(e,"DOMError")}function l(e){return a(e,"String")}function d(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function p(e){return a(e,"Object")}function h(e){return"undefined"!=typeof Event&&g(e,Event)}function f(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function m(e){return"number"==typeof e&&e!=e}function g(e,t){try{return e instanceof t}catch(e){return!1}}function y(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}var v=n(1235);const b=(0,v.Rf)(),_=80;function w(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let i=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||_;for(;n&&i++<r&&(u=S(n,l),!("html"===u||i>1&&s+o.length*c+u.length>=d));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function S(e,t){const n=e,r=[];let o,i,s,a,c;if(!n||!n.tagName)return"";if(b.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&l(o))for(i=o.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const d=["aria-label","type","name","title","alt"];for(c=0;c<d.length;c++)s=d[c],a=n.getAttribute(s),a&&r.push(`[${s}="${a}"]`);return r.join("")}function k(){try{return b.document.location.href}catch(e){return""}}function E(e){if(!b.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const T="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,x="Sentry Logger ",C=["debug","info","warn","error","log","assert","trace"],I={};function O(e){if(!("console"in v.n2))return e();const t=v.n2.console,n={},r=Object.keys(I);r.forEach((e=>{const r=I[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const D=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return T?C.forEach((n=>{t[n]=(...t)=>{e&&O((()=>{v.n2.console[n](`${x}[${n}]:`,...t)}))}})):C.forEach((e=>{t[e]=()=>{}})),t}();function R(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function M(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{y(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function P(e,t,n=!1){return!!l(e)&&(a(t,"RegExp")?t.test(e):!!l(t)&&(n?e===t:e.includes(t)))}function A(e,t=[],n=!1){return t.some((t=>P(e,t,n)))}function N(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&j(o,r),e[t]=o}function L(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){T&&D.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function j(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,L(e,"__sentry_original__",t)}catch(e){}}function F(e){return e.__sentry_original__}function $(e){if(s(e))return{message:e.message,name:e.name,stack:e.stack,...U(e)};if(h(e)){const t={type:e.type,target:B(e.target),currentTarget:B(e.currentTarget),...U(e)};return"undefined"!=typeof CustomEvent&&g(e,CustomEvent)&&(t.detail=e.detail),t}return e}function B(e){try{return t=e,"undefined"!=typeof Element&&g(t,Element)?w(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function U(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function W(e){return H(e,new Map)}function H(e,t){if(p(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=H(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(H(e,t))})),r}return e}function z(){const e=v.n2,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function q(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function V(e){const{message:t,event_id:n}=e;if(t)return t;const r=q(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function K(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function G(e,t){const n=q(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function Y(e){if(e&&e.__sentry_captured__)return!0;try{L(e,"__sentry_captured__",!0)}catch(e){}return!1}function J(e){return Array.isArray(e)?e:[e]}const X="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var Z;function Q(e){return new te((t=>{t(e)}))}function ee(e){return new te(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Z||(Z={}));class te{constructor(e){te.prototype.__init.call(this),te.prototype.__init2.call(this),te.prototype.__init3.call(this),te.prototype.__init4.call(this),this._state=Z.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new te(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new te(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Z.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Z.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Z.PENDING&&(f(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Z.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Z.RESOLVED&&e[1](this._value),this._state===Z.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function ne(){return(0,v.YO)("globalEventProcessors",(()=>[]))}function re(e){ne().push(e)}function oe(e,t,n,r=0){return new te(((o,i)=>{const s=e[r];if(null===t||"function"!=typeof s)o(t);else{const a=s({...t},n);X&&s.id&&null===a&&D.log(`Event processor "${s.id}" dropped event`),f(a)?a.then((t=>oe(e,t,n,r+1).then(o))).then(null,i):oe(e,a,n,r+1).then(o).then(null,i)}}))}var ie=n(1170);const se="production";function ae(e){const t=(0,ie.ph)(),n={sid:z(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return W({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&ce(n,e),n}function ce(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,ie.ph)(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:z()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ue(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i,propagationContext:s}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t;n&&Object.keys(n).length&&(e.extra={...n,...e.extra});r&&Object.keys(r).length&&(e.tags={...r,...e.tags});o&&Object.keys(o).length&&(e.user={...o,...e.user});i&&Object.keys(i).length&&(e.contexts={...i,...e.contexts});s&&(e.level=s);a&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:t.getTraceContext(),...e.contexts};const n=t.transaction;if(n){e.sdkProcessingMetadata={dynamicSamplingContext:n.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const t=n.name;t&&(e.tags={transaction:t,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?J(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t,n){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t,propagationContext:n}}(e,i,s)}function le(e,t){const{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:h,span:f}=t;de(e,"extra",n),de(e,"tags",r),de(e,"user",o),de(e,"contexts",i),de(e,"sdkProcessingMetadata",a),s&&(e.level=s),h&&(e.transactionName=h),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function de(e,t,n){n&&Object.keys(n).length&&(e[t]={...e[t],...n})}let pe;class he{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=fe()}static clone(e){return e?e.clone():new he}clone(){const e=new he;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&ce(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof he?t:this}return e instanceof he?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):p(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=fe(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:(0,ie.yW)(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:i,_level:s,_fingerprint:a,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:i,level:s,fingerprint:a||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){ue(e,this.getScopeData());return oe([...n,...ne(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function fe(){return{traceId:z(),spanId:z().substring(16)}}const me="7.91.0",ge=parseFloat(me),ye=100;class ve{constructor(e,t=new he,n=new he,r=ge){this._version=r,this._stack=[{scope:t}],e&&this.bindClient(e),this._isolationScope=n}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();try{return e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:z(),r=new Error("Sentry syntheticException");return this._withClient(((o,i)=>{o.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},i)})),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:z(),o=new Error(e);return this._withClient(((i,s)=>{i.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},s)})),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:z();return e.type||(this._lastEventId=n),this._withClient(((r,o)=>{r.captureEvent(e,{...t,event_id:n},o)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=ye}=r.getOptions&&r.getOptions()||{};if(i<=0)return;const s={timestamp:(0,ie.yW)(),...e},a=o?O((()=>o(s,t))):s;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,i))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=_e(this);try{e(this)}finally{_e(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return X&&D.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(X&&!n){this.getClient()?D.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):D.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),ce(e,n)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=se}=n&&n.getOptions()||{},{userAgent:i}=v.n2.navigator||{},s=ae({release:r,environment:o,user:t.getUser(),...i&&{userAgent:i},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&ce(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_withClient(e){const{scope:t,client:n}=this.getStackTop();n&&e(n,t)}_callExtensionMethod(e,...t){const n=be().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);X&&D.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function be(){return v.n2.__SENTRY__=v.n2.__SENTRY__||{extensions:{},hub:void 0},v.n2}function _e(e){const t=be(),n=Te(t);return xe(t,e),n}function we(){const e=be();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return ke(e)}function Se(){return we().getIsolationScope()}function ke(e=be()){return Ee(e)&&!Te(e).isOlderThan(ge)||xe(e,new ve),Te(e)}function Ee(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Te(e){return(0,v.YO)("hub",(()=>new ve),e)}function xe(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}const Ce=50,Ie=/\(error: (.*)\)/,Oe=/captureMessage|captureException/;function De(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const i=Ie.test(n)?n.replace(Ie,"$1"):n;if(!i.match(/\S*Error: /)){for(const e of t){const t=e(i);if(t){r.push(t);break}}if(r.length>=Ce)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),Oe.test(t[t.length-1].function||"")&&(t.pop(),Oe.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,Ce).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const Re="<anonymous>";function Me(e){try{return e&&"function"==typeof e&&e.name||Re}catch(e){return Re}}function Pe(e,t=100,n=1/0){try{return Ne("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Ae(e,t=3,n=102400){const r=Pe(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?Ae(e,t-1,n):r;var o}function Ne(e,t,r=1/0,o=1/0,i=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[s,a]=i;if(null==t||["number","boolean","string"].includes(typeof t)&&!m(t))return t;const c=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==n.g&&t===n.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(y(t))return"[VueViewModel]";if(p(r=t)&&"nativeEvent"in r&&"preventDefault"in r&&"stopPropagation"in r)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Me(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const o=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(o)?`[HTMLElement: ${o}]`:`[object ${o}]`}catch(e){return`**non-serializable** (${e})`}var r}(e,t);if(!c.startsWith("[object "))return c;if(t.__sentry_skip_normalization__)return t;const u="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:r;if(0===u)return c.replace("object ","");if(s(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return Ne("",l.toJSON(),u-1,o,i)}catch(e){}const d=Array.isArray(t)?[]:{};let h=0;const f=$(t);for(const e in f){if(!Object.prototype.hasOwnProperty.call(f,e))continue;if(h>=o){d[e]="[MaxProperties ~]";break}const t=f[e];d[e]=Ne(e,t,u-1,o,i),h++}return a(t),d}function Le(e,t,n,r,o,i){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||z(),timestamp:t.timestamp||(0,ie.yW)()},u=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:se);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=R(e.message,i));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=R(s.value,i));const a=e.request;a&&a.url&&(a.url=R(a.url,i))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),void 0===t.type&&function(e,t){const n=v.n2._sentryDebugIds;if(!n)return;let r;const o=je.get(t);o?r=o:(r=new Map,je.set(t,r));const i=Object.keys(n).reduce(((e,o)=>{let i;const s=r.get(o);s?i=s:(i=t(o),r.set(o,i));for(let t=i.length-1;t>=0;t--){const r=i[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=i[e.filename])}))}))}catch(e){}}(c,e.stackParser);const l=function(e,t){if(!t)return e;const n=e?e.clone():new he;return n.update(t),n}(r,n.captureContext);n.mechanism&&G(c,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=(pe||(pe=new he),pe).getScopeData();if(i){le(p,i.getScopeData())}if(l){le(p,l.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),ue(c,p);return oe([...d,...ne(),...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof s&&s>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Pe(e.data,t,n)}})))},...e.user&&{user:Pe(e.user,t,n)},...e.contexts&&{contexts:Pe(e.contexts,t,n)},...e.extra&&{extra:Pe(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Pe(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>(e.data&&(e.data=Pe(e.data,t,n)),e))));return r}(e,s,a):e)))}const je=new WeakMap;function Fe(e){if(e)return function(e){return e instanceof he||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>$e.includes(e)))}(e)?{captureContext:e}:e}const $e=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Be(e,t){return we().captureException(e,Fe(t))}function Ue(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return we().captureMessage(e,n,r)}function We(e,t){return we().captureEvent(e,t)}function He(e){we().configureScope(e)}function ze(e,t){we().addBreadcrumb(e,t)}function qe(e,t){we().setContext(e,t)}function Ve(e){we().setExtras(e)}function Ke(e,t){we().setExtra(e,t)}function Ge(e){we().setTags(e)}function Ye(e,t){we().setTag(e,t)}function Je(e){we().setUser(e)}function Xe(e){return we().withScope(e)}function Ze(e,t){return we().startTransaction({...e},t)}async function Qe(e){const t=nt();return t?t.flush(e):(X&&D.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function et(e){const t=nt();return t?t.close(e):(X&&D.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function tt(){return we().lastEventId()}function nt(){return we().getClient()}function rt(){return we().getScope()}const ot=[];function it(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?J(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),i=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==i){const[e]=o.splice(i,1);o.push(e)}return o}function st(e,t,n){if(n[t.name]=t,-1===ot.indexOf(t.name)&&(t.setupOnce(re,we),ot.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}X&&D.log(`Integration installed: ${t.name}`)}function at(e){const t=nt();t&&t.addIntegration?t.addIntegration(e):X&&D.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)}function ct(e,t){return Object.assign((function(...e){return{setupOnce:()=>{},...t(...e)}}),{id:e})}let ut;const lt="FunctionToString",dt=ct(lt,(()=>({name:lt,setupOnce(){ut=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=F(this)||this;return ut.apply(t,e)}}catch(e){}}}))),pt=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],ht=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],ft="InboundFilters",mt=ct(ft,(e=>({name:ft,processEvent(t,n,r){const o=r.getOptions(),i=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:pt],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:ht],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return X&&D.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${V(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));X&&0===t.length&&D.error(`Could not extract message for event ${V(e)}`);return t}(e).some((e=>A(e,t)))}(e,t.ignoreErrors))return X&&D.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${V(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&A(n,t)}(e,t.ignoreTransactions))return X&&D.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${V(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=gt(e);return!!n&&A(n,t)}(e,t.denyUrls))return X&&D.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${V(e)}.\nUrl: ${gt(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=gt(e);return!n||A(n,t)}(e,t.allowUrls))return X&&D.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${V(e)}.\nUrl: ${gt(e)}`),!0;return!1}(t,i)?null:t}})));function gt(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return X&&D.error(`Cannot extract url for event ${V(e)}`),null}}function yt(e,t,n=250,r,o,i,s){if(!(i.exception&&i.exception.values&&s&&g(s.originalException,Error)))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var c,u;a&&(i.exception.values=(c=vt(e,t,o,s.originalException,r,i.exception.values,a,0),u=n,c.map((e=>(e.value&&(e.value=R(e.value,u)),e)))))}function vt(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(g(r[o],Error)){bt(s,a);const i=e(t,r[o]),u=c.length;_t(i,o,u,a),c=vt(e,t,n,r[o],o,[i,...c],i,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,i)=>{if(g(r,Error)){bt(s,a);const u=e(t,r),l=c.length;_t(u,`errors[${i}]`,l,a),c=vt(e,t,n,r,o,[u,...c],u,l)}})),c}function bt(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function _t(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function wt(e,t){return e(t.stack||"",1)}function St(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=wt(e,t);return r.length&&(n.stacktrace={frames:r}),n}const kt="LinkedErrors",Et=ct(kt,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:kt,preprocessEvent(e,r,o){const i=o.getOptions();yt(St,i.stackParser,i.maxValueLength,n,t,e,r)}}})),Tt={},xt={};function Ct(e,t){Tt[e]=Tt[e]||[],Tt[e].push(t)}function It(e,t){xt[e]||(t(),xt[e]=!0)}function Ot(e,t){const n=e&&Tt[e];if(n)for(const r of n)try{r(t)}catch(t){T&&D.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Me(r)}\nError:`,t)}}let Dt=null;function Rt(e){const t="error";Ct(t,e),It(t,Mt)}function Mt(){Dt=v.n2.onerror,v.n2.onerror=function(e,t,n,r,o){return Ot("error",{column:r,error:o,line:n,msg:e,url:t}),!(!Dt||Dt.__SENTRY_LOADER__)&&Dt.apply(this,arguments)},v.n2.onerror.__SENTRY_INSTRUMENTED__=!0}let Pt=null;function At(e){const t="unhandledrejection";Ct(t,e),It(t,Nt)}function Nt(){Pt=v.n2.onunhandledrejection,v.n2.onunhandledrejection=function(e){return Ot("unhandledrejection",e),!(Pt&&!Pt.__SENTRY_LOADER__)||Pt.apply(this,arguments)},v.n2.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Lt="baggage",jt="sentry-",Ft=/^sentry-/,$t=8192;function Bt(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,i=0===r?o:`${e},${o}`;return i.length>$t?(T&&D.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):i}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${jt}${t}`]=n),e)),{}))}function Ut(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const Wt=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Ht(e){if(!e)return;const t=e.match(Wt);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function zt(e,t){const n=Ht(e),r=function(e){if(!l(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>({...e,...Ut(t)})),{});else{if(!e)return;t=Ut(e)}const n=Object.entries(t).reduce(((e,[t,n])=>(t.match(Ft)&&(e[t.slice(jt.length)]=n),e)),{});return Object.keys(n).length>0?n:void 0}(t),{traceId:o,parentSpanId:i,parentSampled:s}=n||{},a={traceId:o||z(),spanId:z().substring(16),sampled:s};return i&&(a.parentSpanId=i),r&&(a.dsc=r),{traceparentData:n,dynamicSamplingContext:r,propagationContext:a}}function qt(e=z(),t=z().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Vt(e){return(e||we()).getScope().getTransaction()}const Kt=Ht;function Gt(e){return e>9999999999?e/1e3:e}let Yt=!1;function Jt(){const e=Vt();if(e){const t="internal_error";X&&D.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}Jt.tag="sentry_tracingErrorCallback";class Xt{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class Zt{constructor(e={}){this.traceId=e.traceId||z(),this.spanId=e.spanId||z().substring(16),this.startTimestamp=e.startTimestamp||(0,ie.ph)(),this.tags=e.tags||{},this.data=e.data||{},this.instrumenter=e.instrumenter||"sentry",this.origin=e.origin||"manual",e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.name&&(this.description=e.name),e.status&&(this.status=e.status),e.endTimestamp&&(this.endTimestamp=e.endTimestamp)}get name(){return this.description||""}set name(e){this.setName(e)}startChild(e){const t=new Zt({...e,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t),t.transaction=this.transaction,X&&t.transaction){const n=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${t.transaction.name||"< unknown name >"}' (${t.transaction.spanId}).`;t.transaction.metadata.spanMetadata[t.spanId]={logMessage:n},D.log(n)}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setStatus(e){return this.status=e,this}setHttpStatus(e){this.setTag("http.status_code",String(e)),this.setData("http.response.status_code",e);const t=Qt(e);return"unknown_error"!==t&&this.setStatus(t),this}setName(e){this.description=e}isSuccess(){return"ok"===this.status}finish(e){return this.end(e)}end(e){if(X&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:e}=this.transaction.metadata.spanMetadata[this.spanId];e&&D.log(e.replace("Starting","Finishing"))}this.endTimestamp="number"==typeof e?Gt(e):(0,ie.ph)()}toTraceparent(){return qt(this.traceId,this.spanId,this.sampled)}toContext(){return W({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(e){return this.data=e.data||{},this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=e.spanId||this.spanId,this.startTimestamp=e.startTimestamp||this.startTimestamp,this.status=e.status,this.tags=e.tags||{},this.traceId=e.traceId||this.traceId,this}getTraceContext(){return W({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId,origin:this.origin})}toJSON(){return W({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}function Qt(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function en(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},s=W({environment:r.environment||se,release:r.release,user_segment:i,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",s),s}class tn extends Zt{constructor(e,t){super(e),delete this.description,this._measurements={},this._contexts={},this._hub=t||we(),this._name=e.name||"",this.metadata={source:"custom",...e.metadata,spanMetadata:{}},this._trimEnd=e.trimEnd,this.transaction=this;const n=this.metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}setName(e,t="custom"){this._name=e,this.metadata.source=t}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Xt(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this.metadata={...this.metadata,...e}}end(e){const t="number"==typeof e?Gt(e):(0,ie.ph)(),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return W({...super.toContext(),name:this.name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this.name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const e=this._hub||we(),t=e.getClient();if(!t)return{};const n=e.getScope(),r=en(this.traceId,t,n),o=this.metadata.sampleRate;void 0!==o&&(r.sample_rate=`${o}`);const i=this.metadata.source;return i&&"url"!==i&&(r.transaction=this.name),void 0!==this.sampled&&(r.sampled=String(this.sampled)),r}setHub(e){this._hub=e}_finishTransaction(e){if(void 0!==this.endTimestamp)return;this.name||(X&&D.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this.sampled)return X&&D.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&e.endTimestamp)):[];this._trimEnd&&n.length>0&&(this.endTimestamp=n.reduce(((e,t)=>e.endTimestamp&&t.endTimestamp?e.endTimestamp>t.endTimestamp?e:t:e)).endTimestamp);const r=this.metadata,o={contexts:{...this._contexts,trace:this.getTraceContext()},spans:n,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...r,dynamicSamplingContext:this.getDynamicSamplingContext()},...r.source&&{transaction_info:{source:r.source}}};return Object.keys(this._measurements).length>0&&(X&&D.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),o.measurements=this._measurements),X&&D.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),o}}const nn={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},rn=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class on extends Xt{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanId),t.apply(e,n)),void 0===e.endTimestamp&&this._pushActivity(e.spanId)}super.add(e)}}class sn extends tn{constructor(e,t,n=nn.idleTimeout,r=nn.finalTimeout,o=nn.heartbeatInterval,i=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=o,this._onScope=i,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=rn[4],i&&(X&&D.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),t.getScope().setSpan(this)),this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=rn[3],this.end())}),this._finalTimeout)}end(e=(0,ie.ph)()){const t=Gt(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setTag("finishReason",this._finishReason),this.spanRecorder){X&&D.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const t of this._beforeFinishCallbacks)t(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanId===this.spanId)return!0;e.endTimestamp||(e.endTimestamp=t,e.setStatus("cancelled"),X&&D.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const n=e.startTimestamp<t,r=(this._finalTimeout+this._idleTimeout)/1e3,o=e.endTimestamp-this.startTimestamp<r;if(X){const t=JSON.stringify(e,void 0,2);n?o||D.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):D.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return n&&o})),X&&D.log("[Tracing] flushing IdleTransaction")}else X&&D.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new on(t,n,this.spanId,e),X&&D.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=rn[5],this.end(e)))}setFinishReason(e){this._finishReason=e}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=rn[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),X&&D.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,X&&D.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(X&&D.log(`[Tracing] popActivity ${e}`),delete this.activities[e],X&&D.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=(0,ie.ph)();this._idleTimeoutCanceledPermanently?(this._finishReason=rn[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?(X&&D.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=rn[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){X&&D.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function an(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=nt(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function cn(e,t,n){if(!an(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setMetadata({sampleRate:Number(e.sampled)}),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setMetadata({sampleRate:Number(r)})):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setMetadata({sampleRate:Number(r)})):(r=1,e.setMetadata({sampleRate:r})),function(e){if(m(e)||"number"!=typeof e&&"boolean"!=typeof e)return X&&D.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1;if(e<0||e>1)return X&&D.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1;return!0}(r)?r?(e.sampled=Math.random()<r,e.sampled?(X&&D.log(`[Tracing] starting ${e.op} transaction - ${e.name}`),e):(X&&D.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(X&&D.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(X&&D.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function un(){const e=this.getScope().getSpan();return e?{"sentry-trace":e.toTraceparent()}:{}}function ln(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},o=r.instrumenter||"sentry",i=e.instrumenter||"sentry";o!==i&&(X&&D.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${o}\` instrumenter.\nThe transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),e.sampled=!1);let s=new tn(e,this);return s=cn(s,r,{parentSampled:e.parentSampled,transactionContext:e,...t}),s.sampled&&s.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",s),s}function dn(e,t,n,r,o,i,s){const a=e.getClient(),c=a&&a.getOptions()||{};let u=new sn(t,e,n,r,s,o);return u=cn(u,c,{parentSampled:t.parentSampled,transactionContext:t,...i}),u.sampled&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),a&&a.emit&&a.emit("startTransaction",u),u}function pn(){const e=be();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=ln),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=un),Yt||(Yt=!0,Rt(Jt),At(Jt)))}function hn(e,t,n=(()=>{}),r=(()=>{})){const o=_n(e),i=we(),s=rt(),a=s.getSpan(),c=bn(i,a,o);function u(){c&&c.end(),s.setSpan(a)}let l;s.setSpan(c);try{l=t(c)}catch(e){throw c&&c.setStatus("internal_error"),n(e,c),u(),r(),e}return f(l)?l.then((e=>(u(),r(),e)),(e=>{throw c&&c.setStatus("internal_error"),n(e,c),u(),r(),e})):(u(),r(),l)}function fn(e,t){const n=_n(e);return Xe((e=>{const r=bn(we(),e.getSpan(),n);function o(){r&&r.end()}let i;e.setSpan(r);try{i=t(r)}catch(e){throw r&&r.setStatus("internal_error"),o(),e}return f(i)?i.then((e=>(o(),e)),(e=>{throw r&&r.setStatus("internal_error"),o(),e})):(o(),i)}))}function mn(e,t){const n=_n(e);return Xe((e=>{const r=bn(we(),e.getSpan(),n);let o;e.setSpan(r);try{o=t(r,(function(){r&&r.end()}))}catch(e){throw r&&r.setStatus("internal_error"),e}return f(o)?o.then((e=>e),(e=>{throw r&&r.setStatus("internal_error"),e})):o}))}function gn(e){if(!an())return;const t={...e};void 0!==t.name&&void 0===t.description&&(t.description=t.name);const n=we(),r=yn();return r?r.startChild(t):n.startTransaction(t)}function yn(){return rt().getSpan()}function vn({sentryTrace:e,baggage:t},n){const r=rt(),{traceparentData:o,dynamicSamplingContext:i,propagationContext:s}=zt(e,t);r.setPropagationContext(s),X&&o&&D.log(`[Tracing] Continuing trace ${o.traceId}.`);const a={...o,metadata:W({dynamicSamplingContext:o&&!i?{}:i})};return n?n(a):a}function bn(e,t,n){if(an())return t?t.startChild(n):e.startTransaction(n)}function _n(e){const t={...e};return void 0!==t.name&&void 0===t.description&&(t.description=t.name),t}function wn(e,t,n){const r=Vt();r&&r.setMeasurement(e,t,n)}const Sn="c",kn="g",En="s",Tn="d",xn=/[^a-zA-Z0-9_/.-]+/g,Cn=/[^\w\d_:/@.{}[\]$-]+/g;const In={[Sn]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[kn]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[Tn]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[En]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};class On{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},i=(0,ie.ph)()){const s=Math.floor(i),a=t.replace(xn,"_"),c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n.replace(xn,"_")]=String(e[n]).replace(Cn,"_"));return t}(o),u=function(e,t,n,r){return`${e}${t}${n}${Object.entries(W(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,a,r,c),l=this._buckets.get(u);l?(l.metric.add(n),l.timestamp<s&&(l.timestamp=s)):this._buckets.set(u,{metric:new In[e](n),timestamp:s,metricType:e,name:a,unit:r,tags:c})}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const Dn="MetricsAggregator";function Rn(e,t,n,r={}){const o=nt(),i=rt();if(o){if(!o.metricsAggregator)return void(X&&D.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:s,tags:a,timestamp:c}=r,{release:u,environment:l}=o.getOptions(),d=i.getTransaction(),p={};u&&(p.release=u),l&&(p.environment=l),d&&(p.transaction=d.name),X&&D.log(`Adding value of ${n} to ${e} metric ${t}`),o.metricsAggregator.add(e,t,n,s,{...p,...a},c)}}const Mn={increment:function(e,t=1,n){Rn(Sn,e,t,n)},distribution:function(e,t,n){Rn(Tn,e,t,n)},set:function(e,t,n){Rn(En,e,t,n)},gauge:function(e,t,n){Rn(kn,e,t,n)},MetricsAggregator:ct(Dn,(()=>({name:Dn,setup(e){e.metricsAggregator=new On(e)}})))},Pn=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function An(e,t=!1){const{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${s}`}function Nn(e){const t=Pn.exec(e);if(!t)return void O((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",i,s="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return Ln({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function Ln(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function jn(e){const t="string"==typeof e?Nn(e):Ln(e);if(t&&function(e){if(!T)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(D.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(D.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(D.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(D.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}function Fn(e,t=[]){return[e,t]}function $n(e,t){const[n,r]=e;return[n,[...r,t]]}function Bn(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function Un(e,t){return(t||new TextEncoder).encode(e)}function Wn(e,t){const[n,r]=e;let o=JSON.stringify(n);function i(e){"string"==typeof o?o="string"==typeof e?o+e:[Un(o,t),e]:o.push("string"==typeof e?Un(e,t):e)}for(const e of r){const[t,n]=e;if(i(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Pe(n))}i(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function Hn(e,t){const n="string"==typeof e.data?Un(e.data,t):e.data;return[W({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const zn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function qn(e){return zn[e]}function Vn(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Kn(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:An(r)},...o&&{trace:W({...o})}}}const Gn="7";function Yn(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Jn(e,t){return n={sentry_key:e.publicKey,sentry_version:Gn,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function Xn(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${Yn(e)}${e.projectId}/envelope/`}(e)}?${Jn(e,r)}`}function Zn(e,t){let n;return Bn(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Qn(e,t){return n=>{const r=e(n),o={};function i(t,r){const i=r?`${t}:${r}`:t;if(!o[i]){const s=Nn(t);if(!s)return;const a=Xn(s);o[i]=r?function(e,t){return n=>{const r=e(n);return{send:async e=>{const n=Zn(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)},flush:e=>r.flush(e)}}}(e,r)({...n,url:a}):e({...n,url:a})}return o[i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return Zn(e,n)}}).map((e=>"string"==typeof e?i(e,void 0):i(e.dsn,e.release))).filter((e=>!!e));return 0===n.length&&n.push(r),(await Promise.all(n.map((t=>t.send(e)))))[0]},flush:async function(e){const t=[...Object.keys(o).map((e=>o[e])),r];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}}class er extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function tr(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return ee(new er("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new te(((n,r)=>{let o=t.length;if(!o)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Q(e).then((()=>{--o||(clearTimeout(i),n(!0))}),r)}))}))}}}const nr=6e4;function rr(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?nr:r-t}function or(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function ir(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},i=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,n]=e.split(":",2),i=parseInt(t,10),s=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))o[e]=r+s;else o.all=r+s}else s?o.all=r+rr(s,r):429===t&&(o.all=r+6e4);return o}const sr=30;function ar(e,t,n=tr(e.bufferSize||sr)){let r={};function o(o){const i=[];if(Bn(o,((t,n)=>{const o=qn(n);if(or(r,o)){const r=cr(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else i.push(t)})),0===i.length)return Q();const s=Fn(o[0],i),a=t=>{Bn(s,((n,r)=>{const o=cr(n,r);e.recordDroppedEvent(t,qn(r),o)}))};return n.add((()=>t({body:Wn(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&X&&D.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=ir(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof er)return X&&D.error("Skipped sending event because buffer is full."),a("queue_overflow"),Q();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function cr(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}const ur=new Map,lr=new Set;function dr(e,t){return function(e){if(v.n2._sentryModuleMetadata)for(const t of Object.keys(v.n2._sentryModuleMetadata)){const n=v.n2._sentryModuleMetadata[t];if(lr.has(t))continue;lr.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){ur.set(e.filename,n);break}}}(e),ur.get(t)}const pr="ModuleMetadata",hr=ct(pr,(()=>({name:pr,setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{Bn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent(e,t,n){return function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=dr(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e}})));function fr(e,t,n,r){const o=Vn(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const s=Kn(e,o,r,t);delete e.sdkProcessingMetadata;return Fn(s,[[{type:i},e]])}function mr(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=An(t));const i=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Fn(o,[i])}const gr="Not capturing exception because it's already been captured.";class yr{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=jn(e.dsn):X&&D.warn("No DSN provided, client will not send events."),this._dsn){const t=Xn(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(Y(e))return void(X&&D.log(gr));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const i=d(e)?this.eventFromMessage(String(e),t,n):this.eventFromException(e,n);return this._process(i.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&Y(t.originalException))return void(X&&D.log(gr));let r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?X&&D.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ce(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Q(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&(this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&st(e,t,n)})),n}(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return X&&D.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){st(this,e,this._integrations)}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=fr(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=$n(n,Hn(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=Vn(n);return Fn({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:An(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;X&&D.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(e){X&&D.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=mr(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(ce(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new te((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=Se()){const o=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),Le(o,e,t,n,this,r).then((e=>{if(null===e)return e;const{propagationContext:t}=e.sdkProcessingMetadata||{};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:i,dsc:s}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:i},...e.contexts};const a=s||en(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(X){const t=e;"log"===t.logLevel?D.log(t.message):D.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,i=br(e),s=vr(e),a=e.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),ee(new er(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const u="replay_event"===a?"replay":a;return this._prepareEvent(e,t,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,e),new er("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(vr(t)&&r)return r(t,n);if(br(t)&&o)return o(t,n);return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(f(e))return e.then((e=>{if(!p(e)&&null!==e)throw new er(n);return e}),(e=>{throw new er(`${t} rejected with ${e}`)}));if(!p(e)&&null!==e)throw new er(n);return e}(o,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",u,e),new er(`${c} returned \`null\`, will not send event.`,"log");const o=n&&n.getSession();!i&&o&&this._updateSessionFromEvent(o,r);const s=r.transaction_info;if(i&&s&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...s,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof er)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new er(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{X&&D.error("Error while sending event:",e)}));X&&D.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function vr(e){return void 0===e.type}function br(e){return"transaction"===e.type}function _r(e){const t=nt();t&&t.addEventProcessor&&t.addEventProcessor(e)}const wr=v.n2;let Sr=0;function kr(){return Sr>0}function Er(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(F(e))return e}catch(t){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const o=r.map((e=>Er(e,t)));return e.apply(this,o)}catch(e){throw Sr++,setTimeout((()=>{Sr--})),Xe((n=>{n.addEventProcessor((e=>(t.mechanism&&(K(e,void 0,void 0),G(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),Be(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}j(r,e),L(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch(e){}return r}var Tr=n(8518);const xr="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Cr(e,t){const n=Or(e,t),r={type:t&&t.name,value:Rr(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Ir(e,t){return{exception:{values:[Cr(e,t)]}}}function Or(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Dr.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const Dr=/Minified React error #\d+;/i;function Rr(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Mr(e,t,n,r){const o=Ar(e,t,n&&n.syntheticException||void 0,r);return G(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),Q(o)}function Pr(e,t,n="info",r,o){const i=Nr(e,t,r&&r.syntheticException||void 0,o);return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),Q(i)}function Ar(e,t,n,r,o){let i;if(c(t)&&t.error){return Ir(e,t.error)}if(u(t)||a(t,"DOMException")){const o=t;if("stack"in t)i=Ir(e,t);else{const t=o.name||(u(o)?"DOMError":"DOMException"),s=o.message?`${t}: ${o.message}`:t;i=Nr(e,s,n,r),K(i,s)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}if(s(t))return Ir(e,t);if(p(t)||h(t)){return i=function(e,t,n,r){const o=nt(),i=o&&o.getOptions().normalizeDepth,s={exception:{values:[{type:h(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Lr(t,{isUnhandledRejection:r})}]},extra:{__serialized__:Ae(t,i)}};if(n){const t=Or(e,n);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,n,o),G(i,{synthetic:!0}),i}return i=Nr(e,t,n,r),K(i,`${t}`,void 0),G(i,{synthetic:!0}),i}function Nr(e,t,n,r){const o={message:t};if(r&&n){const r=Or(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}return o}function Lr(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys($(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return R(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:R(r,t)}return""}(e),r=t?"promise rejection":"exception";if(c(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(h(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function jr(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:An(r)}},i=function(e){return[{type:"user_report"},e]}(e);return Fn(o,[i])}class Fr extends yr{constructor(e){const t=wr.SENTRY_SDK_SOURCE||(0,Tr.S)();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${t}:@sentry/browser`,version:me}],version:me},super(e),e.sendClientReports&&wr.document&&wr.document.addEventListener("visibilitychange",(()=>{"hidden"===wr.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Mr(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return Pr(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(xr&&D.warn("SDK not enabled, will not capture user feedback."));const t=jr(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(xr&&D.log("No outcomes to send"));if(!this._dsn)return void(xr&&D.log("No dsn provided, will not send outcomes"));xr&&D.log("Sending outcomes:",e);const t=(n=e,Fn((r=this._options.tunnel&&An(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||(0,ie.yW)(),discarded_events:n}]]));var n,r,o;this._sendEnvelope(t)}}const $r=(0,v.Rf)();function Br(){if(!("fetch"in $r))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Ur(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}let Wr;function Hr(e,t=function(){if(Wr)return Wr;if(Ur(wr.fetch))return Wr=wr.fetch.bind(wr);const e=wr.document;let t=wr.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){xr&&D.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Wr=t.bind(wr)}()){let n=0,r=0;return ar(e,(function(o){const i=o.body.length;n+=i,r++;const s={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(n-=i,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Wr=void 0,n-=i,r--,ee(e)}}))}const zr=4;function qr(e){return ar(e,(function(t){return new te(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{o.readyState===zr&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const Vr="?";function Kr(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const Gr=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Yr=/\((\S*)(?::(\d+))(?::(\d+))\)/,Jr=[30,e=>{const t=Gr.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Yr.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=co(t[1]||Vr,t[2]);return Kr(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],Xr=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Zr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Qr=[50,e=>{const t=Xr.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Zr.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Vr;return[n,e]=co(n,e),Kr(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],eo=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,to=[40,e=>{const t=eo.exec(e);return t?Kr(t[2],t[1]||Vr,+t[3],t[4]?+t[4]:void 0):void 0}],no=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ro=[10,e=>{const t=no.exec(e);return t?Kr(t[2],t[3]||Vr,+t[1]):void 0}],oo=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,io=[20,e=>{const t=oo.exec(e);return t?Kr(t[5],t[3]||t[4]||Vr,+t[1],+t[2]):void 0}],so=[Jr,Qr,to],ao=De(...so),co=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Vr,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};const uo=(0,v.Rf)();const lo=v.n2;let po;function ho(e){const t="history";Ct(t,e),It(t,fo)}function fo(){if(!function(){const e=uo.chrome,t=e&&e.app&&e.app.runtime,n="history"in uo&&!!uo.history.pushState&&!!uo.history.replaceState;return!t&&n}())return;const e=lo.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=po,t=String(n);po=t;Ot("history",{from:e,to:t})}return e.apply(this,t)}}lo.onpopstate=function(...t){const n=lo.location.href,r=po;po=n;if(Ot("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},N(lo.history,"pushState",t),N(lo.history,"replaceState",t)}const mo="GlobalHandlers",go=ct(mo,((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:mo,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){Rt((t=>{const{stackParser:n,attachStacktrace:r}=bo();if(nt()!==e||kr())return;const{msg:o,url:i,line:s,column:a,error:u}=t,d=void 0===u&&l(o)?function(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=c(e)?e.message:e,s="Error";const a=i.match(o);a&&(s=a[1],i=a[2]);const u={exception:{values:[{type:s,value:i}]}};return yo(u,t,n,r)}(o,i,s,a):yo(Ar(n,u||o,void 0,r,!1),i,s,a);d.level="error",We(d,{originalException:u,mechanism:{handled:!1,type:"onerror"}})}))}(e),vo("onerror")),t.onunhandledrejection&&(!function(e){At((t=>{const{stackParser:n,attachStacktrace:r}=bo();if(nt()!==e||kr())return;const o=function(e){if(d(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),i=d(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Ar(n,o,void 0,r,!0);i.level="error",We(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),vo("onunhandledrejection"))}}}));function yo(e,t,n,r){const o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,d=isNaN(parseInt(n,10))?void 0:n,p=l(t)&&t.length>0?t:k();return 0===c.length&&c.push({colno:u,filename:p,function:"?",in_app:!0,lineno:d}),e}function vo(e){xr&&D.log(`Global Handler attached: ${e}`)}function bo(){const e=nt();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const _o=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],wo="TryCatch",So=ct(wo,((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:wo,setupOnce(){t.setTimeout&&N(wr,"setTimeout",ko),t.setInterval&&N(wr,"setInterval",ko),t.requestAnimationFrame&&N(wr,"requestAnimationFrame",Eo),t.XMLHttpRequest&&"XMLHttpRequest"in wr&&N(XMLHttpRequest.prototype,"send",To);const e=t.eventTarget;if(e){(Array.isArray(e)?e:_o).forEach(xo)}}}}));function ko(e){return function(...t){const n=t[0];return t[0]=Er(n,{mechanism:{data:{function:Me(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Eo(e){return function(t){return e.apply(this,[Er(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Me(e)},handled:!1,type:"instrument"}})])}}function To(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&N(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Me(t)},handled:!1,type:"instrument"}},r=F(t);return r&&(n.mechanism.data.handler=Me(r)),Er(t,n)}))})),e.apply(this,t)}}function xo(e){const t=wr,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(N(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Er(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Me(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Er(r,{mechanism:{data:{function:"addEventListener",handler:Me(r),target:e},handled:!1,type:"instrument"}}),o])}})),N(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}function Co(){"console"in v.n2&&C.forEach((function(e){e in v.n2.console&&N(v.n2.console,e,(function(t){return I[e]=t,function(...t){Ot("console",{args:t,level:e});const n=I[e];n&&n.apply(v.n2.console,t)}}))}))}const Io=v.n2,Oo=1e3;let Do,Ro,Mo;function Po(e){Ct("dom",e),It("dom",Ao)}function Ao(){if(!Io.document)return;const e=Ot.bind(null,"dom"),t=No(e,!0);Io.document.addEventListener("click",t,!1),Io.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=Io[t]&&Io[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(N(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,i=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},s=i[n]=i[n]||{refCount:0};if(!s.handler){const r=No(e);s.handler=r,t.call(this,n,r,o)}s.refCount++}catch(e){}return t.call(this,n,r,o)}})),N(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},i=o[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function No(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;L(n,"_sentryCaptured",!0),r&&!r._sentryId&&L(r,"_sentryId",z());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Ro)return!1;try{if(!e.target||e.target._sentryId!==Mo)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),Ro=n.type,Mo=r?r._sentryId:void 0}clearTimeout(Do),Do=Io.setTimeout((()=>{Mo=void 0,Ro=void 0}),Oo)}}const Lo=v.n2,jo="__sentry_xhr_v3__";function Fo(e){Ct("xhr",e),It("xhr",$o)}function $o(){if(!Lo.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;N(e,"open",(function(e){return function(...t){const n=Date.now(),r=l(t[0])?t[0].toUpperCase():void 0,o=function(e){if(l(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[jo]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[jo];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Ot("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?N(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),N(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[jo];return o&&l(n)&&l(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),N(e,"send",(function(e){return function(...t){const n=this[jo];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return Ot("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function Bo(e){const t="fetch";Ct(t,e),It(t,Uo)}function Uo(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!Br())return!1;if(Ur($r.fetch))return!0;let e=!1;const t=$r.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Ur(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){T&&D.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&N(v.n2,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Ho(t),method:Wo(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Ho(t),method:Wo(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Ot("fetch",{...o}),e.apply(v.n2,t).then((e=>(Ot("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Ot("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function Wo(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Ho(e){return"string"==typeof e?e:e?Wo(e,"url")?e.url:e.toString?e.toString():"":""}const zo=["fatal","error","warning","log","info","debug"];function qo(e){return"warn"===e?"warning":zo.includes(e)?e:"log"}function Vo(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const Ko=1024,Go="Breadcrumbs",Yo=ct(Go,((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Go,setup(e){t.console&&function(e){const t="console";Ct(t,e),It(t,Co)}(function(e){return function(t){if(nt()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:qo(t.level),message:M(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${M(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}ze(n,{input:t.args,level:t.level})}}(e)),t.dom&&Po(function(e,t){return function(n){if(nt()!==e)return;let r,o,i="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>Ko&&(xr&&D.warn(`\`dom.maxStringLength\` cannot exceed ${Ko}, but a value of ${s} was configured. Sentry will use ${Ko} instead.`),s=Ko),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=w(t,{keyAttrs:i,maxStringLength:s}),o=E(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),ze(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Fo(function(e){return function(t){if(nt()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[jo];if(!n||!r||!o)return;const{method:i,url:s,status_code:a,body:c}=o;ze({category:"xhr",data:{method:i,url:s,status_code:a},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&Bo(function(e){return function(t){if(nt()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){ze({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;ze({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&ho(function(e){return function(t){if(nt()!==e)return;let n=t.from,r=t.to;const o=Vo(wr.location.href);let i=n?Vo(n):void 0;const s=Vo(r);i&&i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),ze({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){nt()===e&&ze({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:V(t)},{event:t})}}(e))}}}));const Jo="LinkedErrors",Xo=ct(Jo,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Jo,preprocessEvent(e,r,o){const i=o.getOptions();yt(Cr,i.stackParser,i.maxValueLength,n,t,e,r)}}})),Zo="HttpContext",Qo=ct(Zo,(()=>({name:Zo,preprocessEvent(e){if(!wr.navigator&&!wr.location&&!wr.document)return;const t=e.request&&e.request.url||wr.location&&wr.location.href,{referrer:n}=wr.document||{},{userAgent:r}=wr.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:o};e.request=i}}))),ei="Dedupe",ti=ct(ei,(()=>{let e;return{name:ei,processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!ri(e,t))return!1;if(!ni(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=oi(t),r=oi(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!ri(e,t))return!1;if(!ni(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return xr&&D.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}}));function ni(e,t){let n=ii(e),r=ii(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function ri(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function oi(e){return e.exception&&e.exception.values&&e.exception.values[0]}function ii(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const si=[new mt,new dt,new So,new Yo,new go,new Xo,new ti,new Qo];function ai(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=si),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),wr.SENTRY_RELEASE&&wr.SENTRY_RELEASE.id&&(e.release=wr.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||ao,Array.isArray(n)?De(...n):n),integrations:it(e),transport:e.transport||(Br()?Hr:qr)};var n;!function(e,t){!0===t.debug&&(X?D.enable():O((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})));const n=we();n.getScope().update(t.initialScope);const r=new e(t);n.bindClient(r)}(Fr,t),e.autoSessionTracking&&function(){if(void 0===wr.document)return void(xr&&D.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));const e=we();if(!e.captureSession)return;pi(e),ho((({from:e,to:t})=>{void 0!==e&&e!==t&&pi(we())}))}()}function ci(e={},t=we()){if(!wr.document)return void(xr&&D.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),o=e.dsn||n&&n.getDsn();if(!o)return void(xr&&D.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const i=wr.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=function(e,t){const n=jn(e);if(!n)return"";const r=`${Yn(n)}embed/error-page/`;let o=`dsn=${An(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(o,e),e.onLoad&&(i.onload=e.onLoad);const{onClose:s}=e;if(s){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{s()}finally{wr.removeEventListener("message",e)}};wr.addEventListener("message",e)}const a=wr.document.head||wr.document.body;a?a.appendChild(i):xr&&D.error("Not injecting report dialog. No injection point found in HTML")}function ui(){}function li(e){e()}function di(e){return Er(e)()}function pi(e){e.startSession({ignoreDuration:!0}),e.captureSession()}function hi(e){const t=nt();t&&t.captureUserFeedback(e)}function fi(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),o=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return mi(e)===mi(t)}(e,o)}function mi(e){return"/"===e[e.length-1]?e.slice(0,-1):e}var gi=n(1422);function yi(){return"undefined"!=typeof window&&(!(0,gi.KV)()||void 0!==v.n2.process&&"renderer"===v.n2.process.type)}const vi="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,bi=(e,t,n)=>{let r,o;return i=>{t.value>=0&&(i||n)&&(o=t.value-(r||0),(o||void 0===r)&&(r=t.value,t.delta=o,e(t)))}},_i=v.n2,wi=()=>_i.__WEB_VITALS_POLYFILL__?_i.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=_i.performance.timing,t=_i.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):_i.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Si=()=>{const e=wi();return e&&e.activationStart||0},ki=(e,t)=>{const n=wi();let r="navigate";return n&&(r=_i.document.prerendering||Si()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Ei=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Ti=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==_i.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},xi=e=>{const t=ki("CLS",0);let n,r=0,o=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const i=o[0],s=o[o.length-1];r&&0!==o.length&&e.startTime-s.startTime<1e3&&e.startTime-i.startTime<5e3?(r+=e.value,o.push(e)):(r=e.value,o=[e]),r>t.value&&(t.value=r,t.entries=o,n&&n())}}))},s=Ei("layout-shift",i);if(s){n=bi(e,t);const r=()=>{i(s.takeRecords()),n(!0)};return Ti(r),r}};
/*
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Ci=-1;const Ii=()=>(Ci<0&&(Ci="hidden"!==_i.document.visibilityState||_i.document.prerendering?1/0:0,Ti((({timeStamp:e})=>{Ci=e}),!0)),{get firstHiddenTime(){return Ci}}),Oi=e=>{const t=Ii(),n=ki("FID");let r;const o=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},i=e=>{e.forEach(o)},s=Ei("first-input",i);r=bi(e,n),s&&Ti((()=>{i(s.takeRecords()),s.disconnect()}),!0)},Di={},Ri=e=>{const t=Ii(),n=ki("LCP");let r;const o=e=>{const o=e[e.length-1];if(o){const e=Math.max(o.startTime-Si(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[o],r())}},i=Ei("largest-contentful-paint",o);if(i){r=bi(e,n);const t=()=>{Di[n.id]||(o(i.takeRecords()),i.disconnect(),Di[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{addEventListener(e,t,{once:!0,capture:!0})})),Ti(t,!0),t}},Mi={},Pi={};let Ai,Ni,Li;function ji(e){return Hi("lcp",e,Wi,Li)}function Fi(e,t){return zi(e,t),Pi[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);Ei(e,(t=>{$i(e,{entries:t})}),t)}(e),Pi[e]=!0),qi(e,t)}function $i(e,t){const n=Mi[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){vi&&D.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Me(r)}\nError:`,t)}}function Bi(){xi((e=>{$i("cls",{metric:e}),Ai=e}))}function Ui(){Oi((e=>{$i("fid",{metric:e}),Ni=e}))}function Wi(){Ri((e=>{$i("lcp",{metric:e}),Li=e}))}function Hi(e,t,n,r){return zi(e,t),Pi[e]||(n(),Pi[e]=!0),r&&t({metric:r}),qi(e,t)}function zi(e,t){Mi[e]=Mi[e]||[],Mi[e].push(t)}function qi(e,t){return()=>{const n=Mi[e];if(!n)return;const r=n.indexOf(t);-1!==r&&n.splice(r,1)}}const Vi=v.n2,Ki="sentryReplaySession",Gi="replay_event",Yi="Unable to send Replay",Ji=5e3,Xi=3,Zi=15e4,Qi=5e3,es=2e7,ts=36e5,ns={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}};var rs;function os(e){const t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function is(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function ss(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,as).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function as(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=ss(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(rs||(rs={}));class cs{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var t;if(!e)return-1;const n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function us({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function ls({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function ds(e){return e.toLowerCase()}function ps(e){return e.toUpperCase()}const hs="__rrweb_original__";function fs(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?ds(t):null}function ms(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let gs=1;const ys=new RegExp("[^a-z0-9-_:]"),vs=-2;function bs(){return gs++}let _s,ws;const Ss=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ks=/^(?:[a-z+]+:)?\/\//i,Es=/^www\..*/i,Ts=/^(data:)([^,]*),(.*)/i;function xs(e,t){return(e||"").replace(Ss,((e,n,r,o,i,s)=>{const a=r||i||s,c=n||o||"";if(!a)return e;if(ks.test(a)||Es.test(a))return`url(${c}${a}${c})`;if(Ts.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const u=t.split("/"),l=a.split("/");u.pop();for(const e of l)"."!==e&&(".."===e?u.pop():u.push(e));return`url(${c}${u.join("/")}${c})`}))}const Cs=/^[^ \t\n\r\u000c]+/,Is=/^[, \t\n\r\u000c]+/;function Os(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Ds(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Rs(){const e=document.createElement("a");return e.href="",e.href}function Ms(e,t,n,r,o,i){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Os(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(Is),!(n>=t.length);){let i=r(Cs);if(","===i.slice(-1))i=Os(e,i.substring(0,i.length-1)),o.push(i);else{let r="";i=Os(e,i);let s=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((i+r).trim());break}if(s)")"===e&&(s=!1);else{if(","===e){n+=1,o.push((i+r).trim());break}"("===e&&(s=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?xs(r,Rs()):"object"===t&&"data"===n?Os(e,r):"function"==typeof i?i(n,r,o):r:Os(e,r):r}function Ps(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function As(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:As(e.parentNode,t,n,r+1):-1}function Ns(e,t){return n=>{const r=n;if(null===r)return!1;if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}}function Ls(e,t,n,r,o,i){try{const s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;let a=-1,c=-1;if(i){if(c=As(s,Ns(r,o)),c<0)return!0;a=As(s,Ns(t,n),c>=0?c:1/0)}else{if(a=As(s,Ns(t,n)),a<0)return!1;c=As(s,Ns(r,o),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!i}catch(e){}return!!i}function js(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:v,recordCanvas:b,keepIframeSrcFn:_,newlyAddedElement:w=!1}=t,S=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:rs.Document,childNodes:[],compatMode:e.compatMode}:{type:rs.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:rs.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:y,unmaskTextClass:v,maskTextSelector:b,unmaskTextSelector:_}=t,w=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,i),S=function(e){if(e instanceof HTMLFormElement)return"form";const t=ds(e.tagName);return ys.test(t)?"div":t}(e);let k={};const E=e.attributes.length;for(let t=0;t<E;t++){const r=e.attributes[t];Ps(S,r.name,r.value)||(k[r.name]=Ms(n,S,ds(r.name),r.value,e,c))}if("link"===S&&s){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=ss(t)),r&&(delete k.rel,delete k.href,k._cssText=xs(r,t.href))}if("style"===S&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=ss(e.sheet);t&&(k._cssText=xs(t,Rs()))}if("input"===S||"textarea"===S||"select"===S||"option"===S){const t=e,n=fs(t),r=ms(t,ps(S),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Ls(t,y,b,v,_,us({type:n,tagName:ps(S),maskInputOptions:a}));k.value=ls({isMasked:e,element:t,value:r,maskInputFn:u})}o&&(k.checked=o)}"option"===S&&(e.selected&&!a.select?k.selected=!0:delete k.selected);if("canvas"===S&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,i=hs in o?o[hs]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(k.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(l.type,l.quality)&&(k.rr_dataURL=t)}if("img"===S&&d){_s||(_s=n.createElement("canvas"),ws=_s.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const o=()=>{t.removeEventListener("load",o);try{_s.width=t.naturalWidth,_s.height=t.naturalHeight,ws.drawImage(t,0,0),k.rr_dataURL=_s.toDataURL(l.type,l.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?k.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==S&&"video"!==S||(k.rr_mediaState=e.paused?"paused":"played",k.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(k.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(k.rr_scrollTop=e.scrollTop));if(w){const{width:t,height:n}=e.getBoundingClientRect();k={class:k.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==S||h(k.src)||(e.contentDocument||(k.rr_src=k.src),delete k.src);let T;try{customElements.get(S)&&(T=!0)}catch(e){}return{type:rs.Element,tagName:S,attributes:k,childNodes:[],isSVG:Ds(e)||void 0,needBlock:w,rootId:m,isCustom:T}}(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:v,recordCanvas:b,keepIframeSrcFn:_,newlyAddedElement:w,rootId:S,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){var n;const{maskAllText:r,maskTextClass:o,unmaskTextClass:i,maskTextSelector:s,unmaskTextSelector:a,maskTextFn:c,maskInputOptions:u,maskInputFn:l,rootId:d}=t,p=e.parentNode&&e.parentNode.tagName;let h=e.textContent;const f="STYLE"===p||void 0,m="SCRIPT"===p||void 0,g="TEXTAREA"===p||void 0;if(f&&h){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(h=ss(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}h=xs(h,Rs())}m&&(h="SCRIPT_PLACEHOLDER");const y=Ls(e,o,s,i,a,r);f||m||g||!h||!y||(h=c?c(h):h.replace(/[\S]/g,"*"));g&&h&&(u.textarea||y)&&(h=l?l(h,e.parentNode):h.replace(/[\S]/g,"*"));if("OPTION"===p&&h){h=ls({isMasked:Ls(e,o,s,i,a,us({type:null,tagName:p,maskInputOptions:u})),element:e,value:h,maskInputFn:l})}return{type:rs.Text,textContent:h||"",isStyle:f,rootId:d}}(e,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:S});case e.CDATA_SECTION_NODE:return{type:rs.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:rs.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function Fs(e){return null==e?"":e.toLowerCase()}function $s(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:b={},inlineImages:_=!1,recordCanvas:w=!1,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:E=5e3,onStylesheetLoad:T,stylesheetLoadTimeout:x=5e3,keepIframeSrcFn:C=(()=>!1),newlyAddedElement:I=!1}=t;let{preserveWhiteSpace:O=!0}=t;const D=js(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:b,inlineImages:_,recordCanvas:w,keepIframeSrcFn:C,newlyAddedElement:I});if(!D)return console.warn(e,"not serialized"),null;let R;R=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===rs.Comment)return!0;if(e.type===rs.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Fs(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Fs(e.attributes.name)||"icon"===Fs(e.attributes.rel)||"apple-touch-icon"===Fs(e.attributes.rel)||"shortcut icon"===Fs(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Fs(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Fs(e.attributes.property).match(/^(og|twitter|fb):/)||Fs(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Fs(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Fs(e.attributes.name)||"googlebot"===Fs(e.attributes.name)||"bingbot"===Fs(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Fs(e.attributes.name)||"generator"===Fs(e.attributes.name)||"framework"===Fs(e.attributes.name)||"publisher"===Fs(e.attributes.name)||"progid"===Fs(e.attributes.name)||Fs(e.attributes.property).match(/^article:/)||Fs(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Fs(e.attributes.name)||"yandex-verification"===Fs(e.attributes.name)||"csrf-token"===Fs(e.attributes.name)||"p:domain_verify"===Fs(e.attributes.name)||"verify-v1"===Fs(e.attributes.name)||"verification"===Fs(e.attributes.name)||"shopify-checkout-api-token"===Fs(e.attributes.name)))return!0}}return!1}(D,v)&&(O||D.type!==rs.Text||D.isStyle||D.textContent.replace(/^\s+|\s+$/gm,"").length)?bs():vs;const M=Object.assign(D,{id:R});if(r.add(e,M),R===vs)return null;S&&S(e);let P=!p;if(M.type===rs.Element){P=P&&!M.needBlock,delete M.needBlock;const t=e.shadowRoot;t&&is(t)&&(M.isShadowHost=!0)}if((M.type===rs.Document||M.type===rs.Element)&&P){v.headWhitespace&&M.type===rs.Element&&"head"===M.tagName&&(O=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:b,inlineImages:_,recordCanvas:w,preserveWhiteSpace:O,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:C};for(const n of Array.from(e.childNodes)){const e=$s(n,t);e&&M.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=$s(n,t);r&&(is(e.shadowRoot)&&(r.isShadow=!0),M.childNodes.push(r))}}return e.parentNode&&os(e.parentNode)&&is(e.parentNode)&&(M.isShadow=!0),M.type===rs.Element&&"iframe"===M.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,i=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=setTimeout((()=>{i||(t(),i=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),i=!0,t()}))}const s="about:blank";if(r.location.href!==s||e.src===s||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&k){const n=$s(t,{doc:t,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:b,inlineImages:_,recordCanvas:w,preserveWhiteSpace:O,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:C});n&&k(e,n)}}),E),M.type===rs.Element&&"link"===M.tagName&&"stylesheet"===M.attributes.rel&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const i=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(i),o=!0,t()}))}(e,(()=>{if(T){const t=$s(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:b,inlineImages:_,recordCanvas:w,preserveWhiteSpace:O,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:C});t&&T(e,t)}}),x),M}function Bs(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Us="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Ws={map:{},getId(){return console.error(Us),-1},getNode(){return console.error(Us),null},removeNodeFromMap(){console.error(Us)},has(){return console.error(Us),!1},reset(){console.error(Us)}};function Hs(e,t,n={}){let r=null,o=0;return function(...i){const s=Date.now();o||!1!==n.leading||(o=s);const a=t-(s-o),c=this;a<=0||a>t?(r&&(clearTimeout(r),r=null),o=s,e.apply(c,i)):r||!1===n.trailing||(r=setTimeout((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,i)}),a))}}function zs(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>zs(e,t,i||{},!0)}function qs(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Ws=new Proxy(Ws,{get(e,t,n){return"map"===t&&console.error(Us),Reflect.get(e,t,n)}}));let Vs=Date.now;function Ks(e){var t,n,r,o,i,s;const a=e.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==a?void 0:a.documentElement.scrollLeft)||(null===(n=null===(t=null==a?void 0:a.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(r=null==a?void 0:a.body)||void 0===r?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==a?void 0:a.documentElement.scrollTop)||(null===(i=null===(o=null==a?void 0:a.body)||void 0===o?void 0:o.parentElement)||void 0===i?void 0:i.scrollTop)||(null===(s=null==a?void 0:a.body)||void 0===s?void 0:s.scrollTop)||0}}function Gs(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ys(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Js(e,t,n,r,o){if(!e)return!1;const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!i)return!1;const s=Ns(t,n);if(!o){const e=r&&i.matches(r);return s(i)&&!e}const a=As(i,s);let c=-1;return!(a<0)&&(r&&(c=As(i,Ns(null,r))),a>-1&&c<0||a<c)}function Xs(e,t){return t.getId(e)===vs}function Zs(e,t){if(os(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Zs(e.parentNode,t))}function Qs(e){return Boolean(e.changedTouches)}function ea(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function ta(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function na(e){return Boolean(null==e?void 0:e.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(Vs=()=>(new Date).getTime());class ra{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function oa(e){var t,n;let r=null;return(null===(n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||void 0===n?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function ia(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=oa(n);)n=t;return n}(e);return t.contains(n)}function sa(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||ia(e))}var aa=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(aa||{}),ca=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(ca||{}),ua=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ua||{}),la=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(la||{});function da(e){return"__ln"in e}class pa{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&da(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&da(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const ha=(e,t)=>`${e}@${t}`;class fa{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new pa,r=e=>{let t=e,n=vs;for(;n===vs;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!sa(o))return;const i=os(o.parentNode)?this.mirror.getId(oa(o)):this.mirror.getId(o.parentNode),s=r(o);if(-1===i||-1===s)return n.addNode(o);const a=$s(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{ea(e,this.mirror)&&this.iframeManager.addIframe(e),ta(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),na(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:i,nextId:s,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)ga(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)va(this.droppedSet,e)||ga(this.removes,e,this.mirror)?va(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),o(e.value)}const s={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(Xs(e.target,this.mirror))return;let t;try{t=document.implementation.createHTMLDocument()}catch(e){t=this.doc}switch(e.type){case"characterData":{const t=e.target.textContent;Js(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Ls(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,o=e.target.getAttribute(r);if("value"===r){const t=fs(n),r=n.tagName;o=ms(n,r,t);const i=us({maskInputOptions:this.maskInputOptions,tagName:r,type:t});o=ls({isMasked:Ls(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:n,value:o,maskInputFn:this.maskInputFn})}if(Js(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===e.oldValue)return;let i=this.attributes.find((t=>t.node===e.target));if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(o)){if(n.contentDocument)return;r="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!Ps(n.tagName,r)&&(i.attributes[r]=Ms(this.doc,ds(n.tagName),ds(r),o,n,this.maskAttributeFn),"style"===r)){const r=t.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),o=n.style.getPropertyPriority(e);t!==r.style.getPropertyValue(e)||o!==r.style.getPropertyPriority(e)?i.styleDiff[e]=""===o?t:[t,o]:i._unchangedStyles[e]=[t,o]}for(const e of Array.from(r.style))""===n.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}break}case"childList":if(Js(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=os(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Js(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Xs(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(ma(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Zs(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[ha(n,r)]?ma(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!os(e.target)||!is(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Xs(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[ha(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Js(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),na(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ma(e,t){e.delete(t),t.childNodes.forEach((t=>ma(e,t)))}function ga(e,t,n){return 0!==e.length&&ya(e,t,n)}function ya(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||ya(e,r,n)}function va(e,t){return 0!==e.size&&ba(e,t)}function ba(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||ba(e,n))}let _a;function wa(e){_a=e}function Sa(){_a=void 0}const ka=e=>{if(!_a)return e;return(...t)=>{try{return e(...t)}catch(e){if(_a&&!0===_a(e))return()=>{};throw e}}},Ea=[];function Ta(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function xa(e,t){var n,r;const o=new fa;Ea.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const s=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");s&&window[s]&&(i=window[s]);const a=new i(ka((t=>{e.onMutation&&!1===e.onMutation(t)||o.processMutations.bind(o)(t)})));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Ca({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(!1===s.mouseInteraction)return()=>{};const a=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,c=[];let u=null;return Object.keys(ua).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((s=>{let a=ds(s);const l=(t=>s=>{const a=Ta(s);if(Js(a,r,o,i,!0))return;let c=null,l=t;if("pointerType"in s){switch(s.pointerType){case"mouse":c=la.Mouse;break;case"touch":c=la.Touch;break;case"pen":c=la.Pen}c===la.Touch?ua[t]===ua.MouseDown?l="TouchStart":ua[t]===ua.MouseUp&&(l="TouchEnd"):la.Pen}else Qs(s)&&(c=la.Touch);null!==c?(u=c,(l.startsWith("Touch")&&c===la.Touch||l.startsWith("Mouse")&&c===la.Mouse)&&(c=null)):ua[t]===ua.Click&&(c=u,u=null);const d=Qs(s)?s.changedTouches[0]:s;if(!d)return;const p=n.getId(a),{clientX:h,clientY:f}=d;ka(e)(Object.assign({type:ua[l],id:p,x:h,y:f},null!==c&&{pointerType:c}))})(s);if(window.PointerEvent)switch(ua[s]){case ua.MouseDown:case ua.MouseUp:a=a.replace("mouse","pointer");break;case ua.TouchStart:case ua.TouchEnd:return}c.push(Bs(a,l,t))})),ka((()=>{c.forEach((e=>e()))}))}function Ia({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){return Bs("scroll",ka(Hs(ka((s=>{const a=Ta(s);if(!a||Js(a,r,o,i,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=Ks(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),s.scroll||100)),t)}const Oa=["INPUT","TEXTAREA","SELECT"],Da=new WeakMap;function Ra({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:m}){function g(e){let n=Ta(e);const l=e.isTrusted,g=n&&ps(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||Oa.indexOf(g)<0||Js(n,r,o,i,!0))return;const v=n;if(v.classList.contains(s)||a&&v.matches(a))return;const b=fs(n);let _=ms(v,g,b),w=!1;const S=us({maskInputOptions:c,tagName:g,type:b}),k=Ls(n,p,f,h,m,S);"radio"!==b&&"checkbox"!==b||(w=n.checked),_=ls({isMasked:k,element:n,value:_,maskInputFn:u}),y(n,d?{text:_,isChecked:w,userTriggered:l}:{text:_,isChecked:w});const E=n.name;"radio"===b&&E&&w&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach((e=>{if(e!==n){const t=ls({isMasked:k,element:e,value:ms(e,g,b),maskInputFn:u});y(e,d?{text:t,isChecked:!w,userTriggered:!1}:{text:t,isChecked:!w})}}))}function y(t,r){const o=Da.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Da.set(t,r);const o=n.getId(t);ka(e)(Object.assign(Object.assign({},r),{id:o}))}}const v=("last"===l.input?["change"]:["input","change"]).map((e=>Bs(e,ka(g),t))),b=t.defaultView;if(!b)return()=>{v.forEach((e=>e()))};const _=b.Object.getOwnPropertyDescriptor(b.HTMLInputElement.prototype,"value"),w=[[b.HTMLInputElement.prototype,"value"],[b.HTMLInputElement.prototype,"checked"],[b.HTMLSelectElement.prototype,"value"],[b.HTMLTextAreaElement.prototype,"value"],[b.HTMLSelectElement.prototype,"selectedIndex"],[b.HTMLOptionElement.prototype,"selected"]];return _&&_.set&&v.push(...w.map((e=>zs(e[0],e[1],{set(){ka(g)({target:this,isTrusted:!1})}},!1,b)))),ka((()=>{v.forEach((e=>e()))}))}function Ma(e){return function(e,t){if(La("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||La("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||La("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||La("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Pa(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Aa({mirror:e,stylesheetManager:t},n){var r,o,i;let s=null;s="#document"===n.nodeName?e.getId(n):e.getId(n.host);const a="#document"===n.nodeName?null===(r=n.defaultView)||void 0===r?void 0:r.Document:null===(i=null===(o=n.ownerDocument)||void 0===o?void 0:o.defaultView)||void 0===i?void 0:i.ShadowRoot,c=(null==a?void 0:a.prototype)?Object.getOwnPropertyDescriptor(null==a?void 0:a.prototype,"adoptedStyleSheets"):void 0;return null!==s&&-1!==s&&a&&c?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var e;return null===(e=c.get)||void 0===e?void 0:e.call(this)},set(e){var n;const r=null===(n=c.set)||void 0===n?void 0:n.call(this,e);if(null!==s&&-1!==s)try{t.adoptStyleSheets(e,s)}catch(e){}return r}}),ka((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}))):()=>{}}function Na(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=xa(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let s,a=[];const c=Hs(ka((t=>{const n=Date.now()-s;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],s=null})),i),u=ka(Hs(ka((e=>{const t=Ta(e),{clientX:n,clientY:o}=Qs(e)?e.changedTouches[0]:e;s||(s=Vs()),a.push({x:n,y:o,id:r.getId(t),timeOffset:Vs()-s}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?ca.Drag:e instanceof MouseEvent?ca.MouseMove:ca.TouchMove)})),o,{trailing:!1})),l=[Bs("mousemove",u,n),Bs("touchmove",u,n),Bs("drag",u,n)];return ka((()=>{l.forEach((e=>e()))}))}(e),i=Ca(e),s=Ia(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Bs("resize",ka(Hs(ka((()=>{const t=Gs(),o=Ys();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=Ra(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){const a=ka((s=>Hs(ka((i=>{const a=Ta(i);if(!a||Js(a,t,n,r,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;e({type:s,id:o.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})})),i.media||500))),c=[Bs("play",a(0),s),Bs("pause",a(1),s),Bs("seeked",a(2),s),Bs("volumechange",a(3),s),Bs("ratechange",a(4),s)];return ka((()=>{c.forEach((e=>e()))}))}(e),l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:ka(((r,o,i)=>{const[s,a]=i,{id:c,styleId:u}=Pa(o,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:s,index:a}]}),r.apply(o,i)}))});const i=r.CSSStyleSheet.prototype.deleteRule;let s,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:ka(((r,o,i)=>{const[s]=i,{id:a,styleId:c}=Pa(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:s}]}),r.apply(o,i)}))}),r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:ka(((r,o,i)=>{const[s]=i,{id:a,styleId:c}=Pa(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:s}),r.apply(o,i)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:ka(((r,o,i)=>{const[s]=i,{id:a,styleId:c}=Pa(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:s}),r.apply(o,i)}))}));const c={};ja("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(ja("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),ja("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),ja("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,o])=>{u[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(u[r].insertRule,{apply:ka(((r,o,i)=>{const[s,a]=i,{id:c,styleId:u}=Pa(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:s,index:[...Ma(o),a||0]}]}),r.apply(o,i)}))}),o.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:ka(((r,o,i)=>{const[s]=i,{id:a,styleId:c}=Pa(o.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...Ma(o),s]}]}),r.apply(o,i)}))})})),ka((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}))}(e,{win:n}),d=Aa(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:ka(((o,s,a)=>{var c;const[u,l,d]=a;if(n.has(u))return i.apply(s,[u,l,d]);const{id:p,styleId:h}=Pa(null===(c=s.parentRule)||void 0===c?void 0:c.parentStyleSheet,t,r.styleMirror);return(p&&-1!==p||h&&-1!==h)&&e({id:p,styleId:h,set:{property:u,value:l,priority:d},index:Ma(s.parentRule)}),o.apply(s,a)}))});const s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:ka(((o,i,a)=>{var c;const[u]=a;if(n.has(u))return s.apply(i,[u]);const{id:l,styleId:d}=Pa(null===(c=i.parentRule)||void 0===c?void 0:c.parentStyleSheet,t,r.styleMirror);return(l&&-1!==l||d&&-1!==d)&&e({id:l,styleId:d,remove:{property:u},index:Ma(i.parentRule)}),o.apply(i,a)}))}),ka((()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s}))}(e,{win:n}),h=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const s=qs(t.fonts,"add",(function(t){return function(n){return setTimeout(ka((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=i})),r.push(s),ka((()=>{r.forEach((e=>e()))}))}(e):()=>{},f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e;let a=!0;const c=ka((()=>{const e=t.getSelection();if(!e||a&&(null==e?void 0:e.isCollapsed))return;a=e.isCollapsed||!1;const c=[],u=e.rangeCount||0;for(let t=0;t<u;t++){const s=e.getRangeAt(t),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=s;Js(a,r,o,i,!0)||Js(l,r,o,i,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}s({ranges:c})}));return c(),Bs("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?qs(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return ka((()=>{Ea.forEach((e=>e.reset())),r.disconnect(),o(),i(),s(),a(),c(),u(),l(),d(),p(),h(),f(),m(),g.forEach((e=>e()))}))}function La(e){return void 0!==window[e]}function ja(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Fa{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let s=o.get(t);return s||(s=this.generateIdFn(),o.set(t,s),i.set(s,t)),s}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class $a{constructor(){this.crossOriginIframeMirror=new Fa(bs),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Ba{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Fa(bs),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Fa(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case aa.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:aa.IncrementalSnapshot,data:{source:ca.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case aa.Meta:case aa.Load:case aa.DomContentLoaded:return!1;case aa.Plugin:return t;case aa.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case aa.IncrementalSnapshot:switch(t.data.source){case ca.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case ca.Drag:case ca.TouchMove:case ca.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case ca.ViewportResize:return!1;case ca.MediaInteraction:case ca.MouseInteraction:case ca.Scroll:case ca.CanvasMutation:case ca.Input:return this.replaceIds(t.data,e,["id"]),t;case ca.StyleSheetRule:case ca.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case ca.Font:return t;case ca.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case ca.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(n=t.data.styles)||void 0===n||n.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===rs.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Ua{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Wa{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!is(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=xa(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Ia(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Aa({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(qs(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&sa(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Ha{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}}class za{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new ra,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:as(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class qa{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function Va(e){const t=e;return t.timestamp=Vs(),t}let Ka,Ga;const Ya=new cs;function Ja(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:v,maskInputFn:b,maskTextFn:_,packFn:w,sampling:S={},dataURLOptions:k={},mousemoveWait:E,recordCanvas:T=!1,recordCrossOriginIframes:x=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:I=!1,collectFonts:O=!1,inlineImages:D=!1,plugins:R,keepIframeSrcFn:M=(()=>!1),ignoreCSSAttributes:P=new Set([]),errorHandler:A,onMutation:N,getCanvasManager:L}=e;wa(A);const j=!x||window.parent===window;let F=!1;if(!j)try{window.parent.document&&(F=!1)}catch(e){F=!0}if(j&&!t)throw new Error("emit function is required");void 0!==E&&void 0===S.mousemove&&(S.mousemove=E),Ya.reset();const $=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},B=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let U;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let W=0;const H=e=>{for(const t of R||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!F&&(e=w(e)),e},z=(e,o)=>{var i;if(!(null===(i=Ea[0])||void 0===i?void 0:i.isFrozen())||e.type===aa.FullSnapshot||e.type===aa.IncrementalSnapshot&&e.data.source===ca.Mutation||Ea.forEach((e=>e.unfreeze())),j)null==t||t(H(e),o);else if(F){const t={type:"rrweb",event:H(e),origin:window.location.origin,isCheckout:o};window.parent.postMessage(t,"*")}if(e.type===aa.FullSnapshot)U=e,W=0;else if(e.type===aa.IncrementalSnapshot){if(e.data.source===ca.Mutation&&e.data.isAttachIframe)return;W++;const t=r&&W>=r,o=n&&e.timestamp-U.timestamp>n;(t||o)&&Q(!0)}};Ka=z;const q=e=>{z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.Mutation},e)}))},V=e=>z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.Scroll},e)})),K=e=>z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.CanvasMutation},e)})),G=new za({mutationCb:q,adoptedStyleSheetCb:e=>z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.AdoptedStyleSheet},e)}))}),Y="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new $a:new Ba({mirror:Ya,mutationCb:q,stylesheetManager:G,recordCrossOriginIframes:x,wrappedEmit:z});for(const e of R||[])e.getMirror&&e.getMirror({nodeMirror:Ya,crossOriginIframeMirror:Y.crossOriginIframeMirror,crossOriginIframeStyleMirror:Y.crossOriginIframeStyleMirror});const J=new qa,X=Xa(L,{recordCanvas:T,blockClass:o,blockSelector:i,unblockSelector:s,sampling:S.canvas,dataURLOptions:k}),Z="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Ua:new Wa({mutationCb:q,scrollCb:V,bypassOptions:{onMutation:N,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:$,dataURLOptions:k,maskAttributeFn:v,maskTextFn:_,maskInputFn:b,recordCanvas:T,inlineImages:D,sampling:S,slimDOMOptions:B,iframeManager:Y,stylesheetManager:G,canvasManager:X,keepIframeSrcFn:M,processedNodeManager:J},mirror:Ya}),Q=(e=!1)=>{z(Va({type:aa.Meta,data:{href:window.location.href,width:Ys(),height:Gs()}}),e),G.reset(),Z.init(),Ea.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new cs,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:v=!1,dataURLOptions:b,preserveWhiteSpace:_,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:T,keepIframeSrcFn:x=(()=>!1)}=t||{};return $s(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:b,inlineImages:p,recordCanvas:h,preserveWhiteSpace:_,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:T,keepIframeSrcFn:x,newlyAddedElement:!1})}(document,{mirror:Ya,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:$,maskAttributeFn:v,maskInputFn:b,maskTextFn:_,slimDOM:B,dataURLOptions:k,recordCanvas:T,inlineImages:D,onSerialize:e=>{ea(e,Ya)&&Y.addIframe(e),ta(e,Ya)&&G.trackLinkElement(e),na(e)&&Z.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{Y.attachIframe(e,t),Z.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{G.attachLinkElement(e,t)},keepIframeSrcFn:M});if(!t)return console.warn("Failed to snapshot the document");z(Va({type:aa.FullSnapshot,data:{node:t,initialOffset:Ks(window)}})),Ea.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&G.adoptStyleSheets(document.adoptedStyleSheets,Ya.getId(document))};Ga=Q;try{const e=[],t=e=>{var t;return ka(Na)({onMutation:N,mutationCb:q,mousemoveCb:(e,t)=>z(Va({type:aa.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.MouseInteraction},e)})),scrollCb:V,viewportResizeCb:e=>z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.ViewportResize},e)})),inputCb:e=>z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.Input},e)})),mediaInteractionCb:e=>z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.MediaInteraction},e)})),styleSheetRuleCb:e=>z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.StyleSheetRule},e)})),styleDeclarationCb:e=>z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.StyleDeclaration},e)})),canvasMutationCb:K,fontCb:e=>z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.Font},e)})),selectionCb:e=>{z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.Selection},e)}))},customElementCb:e=>{z(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.CustomElement},e)}))},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:$,inlineStylesheet:f,sampling:S,recordCanvas:T,inlineImages:D,userTriggeredOnInput:I,collectFonts:O,doc:e,maskAttributeFn:v,maskInputFn:b,maskTextFn:_,keepIframeSrcFn:M,blockSelector:i,unblockSelector:s,slimDOMOptions:B,dataURLOptions:k,mirror:Ya,iframeManager:Y,stylesheetManager:G,shadowDomManager:Z,processedNodeManager:J,canvasManager:X,ignoreCSSAttributes:P,plugins:(null===(t=null==R?void 0:R.filter((e=>e.observer)))||void 0===t?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>z(Va({type:aa.Plugin,data:{plugin:e.name,payload:t}}))}))))||[]},{})};Y.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Q(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Bs("DOMContentLoaded",(()=>{z(Va({type:aa.DomContentLoaded,data:{}})),"DOMContentLoaded"===C&&n()}))),e.push(Bs("load",(()=>{z(Va({type:aa.Load,data:{}})),"load"===C&&n()}),window))),()=>{e.forEach((e=>e())),J.destroy(),Ga=void 0,Sa()}}catch(e){console.warn(e)}}function Xa(e,t){return e?e(Object.assign(Object.assign({},t),{mirror:Ya,win:window,mutationCb:e=>function(e){Ka&&Ka(e)}(Va({type:aa.IncrementalSnapshot,data:Object.assign({source:ca.CanvasMutation},e)}))})):new Ha}Ja.mirror=Ya,Ja.takeFullSnapshot=function(e){if(!Ga)throw new Error("please take full snapshot after start recording");Ga(e)};const Za=3;function Qa(e){return e>9999999999?e:1e3*e}function ec(e){return e>9999999999?e/1e3:e}function tc(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:aa.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Pe(t,10,1e3)}}),"console"===t.category))))}const nc="button,a";function rc(e){return e.closest(nc)||e}function oc(e){const t=ic(e);return t&&t instanceof Element?rc(t):t}function ic(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let sc;function ac(e){return sc||(sc=[],N(Vi,"open",(function(e){return function(...t){if(sc)try{sc.forEach((e=>e()))}catch(e){}return e.apply(Vi,t)}}))),sc.push(e),()=>{const t=sc?sc.indexOf(e):-1;t>-1&&sc.splice(t,1)}}class cc{constructor(e,t,n=tc){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=ac((()=>{this._lastMutation=lc()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!uc.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:ec(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=ec(e)}registerScroll(e=Date.now()){this._lastScroll=ec(e)}registerClick(e){const t=rc(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=lc();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:i,clickBreadcrumb:s}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.slowClickDetected",data:{...s.data,url:Vi.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:i||1}};this._addBreadcrumbEvent(t,o)}else if(i>1){const e={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.multiClick",data:{...s.data,url:Vi.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const uc=["A","BUTTON","INPUT"];function lc(){return Date.now()/1e3}function dc(e,t){try{if(!function(e){return e.type===Za}(t))return;const{source:n}=t.data;if(n===ca.Mutation&&e.registerMutation(t.timestamp),n===ca.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===ca.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=Ja.mirror.getNode(r);o instanceof HTMLElement&&n===ua.Click&&e.registerClick(o)}}catch(e){}}function pc(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var hc;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(hc||(hc={}));const fc=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function mc(e){const t={};for(const n in e)if(fc.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const gc=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?oc(e.event):ic(e.event),n=w(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return pc({category:`ui.${e.name}`,...yc(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||function(e,t,n){e.handleClick(t,n)}(e.clickDetector,n,oc(t.event)),tc(e,n)};function yc(e,t){const n=Ja.mirror.getId(e),r=n&&Ja.mirror.getNode(n),o=r&&Ja.mirror.getMeta(r),i=o&&function(e){return e.type===hc.Element}(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map((e=>e.type===hc.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:mc(i.attributes)}}:{}}}function vc(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(s)||!i)return null;const a=t||r||o,c=1===i.length;if(!a&&c)return null;const u=w(s,{maxStringLength:200})||"<unknown>",l=yc(s,u);return pc({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}(t);n&&tc(e,n)}const bc={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:wc(i),end:wc(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,i=wc(o);return{type:n,name:r,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:m}=e;if(0===o)return null;return{type:`${t}.${m}`,start:wc(h),end:wc(i),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:i,redirectCount:p}}}};function _c(e){return bc[e.entryType]?bc[e.entryType](e):null}function wc(e){return((ie.Z1||Vi.performance.timeOrigin)+e)/1e3}function Sc(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(Fi(e,n))})),r.push(ji((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,o=e.value,i=wc(o);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:o,size:o,nodeId:r?Ja.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const kc="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ec='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Tc(e,t){kc&&(D.info(e),t&&Cc(e))}function xc(e,t){kc&&(D.info(e),t&&setTimeout((()=>{Cc(e)}),0))}function Cc(e){ze({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Ic extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Oc{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>es)throw new Ic;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Qa(e):null}}class Dc{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Tc("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const i=({data:t})=>{const s=t;if(s.method===e&&s.id===n){if(this._worker.removeEventListener("message",i),!s.success)return kc&&D.error("[Replay]",s.response),void o(new Error("Error in compression worker"));r(s.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Rc{constructor(e){this._worker=new Dc(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Qa(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>es?Promise.reject(new Ic):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{kc&&D.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Mc{constructor(e){this._fallback=new Oc,this._compression=new Rc(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void Tc("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){kc&&D.warn("[Replay] Failed to add events when switching buffers.",e)}}}function Pc({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob([Ec]);return URL.createObjectURL(e)}();return""}();if(!t)return;Tc("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Mc(n)}catch(e){Tc("[Replay] Failed to create compression worker")}}(t);if(e)return e}return Tc("[Replay] Using simple buffer"),new Oc}function Ac(){try{return"sessionStorage"in Vi&&!!Vi.sessionStorage}catch(e){return!1}}function Nc(e){!function(){if(!Ac())return;try{Vi.sessionStorage.removeItem(Ki)}catch(e){}}(),e.session=void 0}function Lc(e){return void 0!==e&&Math.random()<e}function jc(e){const t=Date.now();return{id:e.id||z(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Fc(e){if(Ac())try{Vi.sessionStorage.setItem(Ki,JSON.stringify(e))}catch(e){}}function $c({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return Lc(e)?"session":!!t&&"buffer"}(e,t),i=jc({sampled:o,previousSessionId:r});return n&&Fc(i),i}function Bc(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Uc(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Bc(e.started,t,r)||Bc(e.lastActivity,n,r)}function Wc(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!Uc(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Hc({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},o){const i=o.stickySession&&function(e){if(!Ac())return null;try{const t=Vi.sessionStorage.getItem(Ki);if(!t)return null;const n=JSON.parse(t);return xc("[Replay] Loading existing session",e),jc(n)}catch(e){return null}}(e);return i?Wc(i,{sessionIdleExpire:t,maxReplayDuration:n})?(xc("[Replay] Session in sessionStorage is expired, creating new one..."),$c(o,{previousSessionId:i.id})):i:(xc("[Replay] Creating new session",e),$c(o,{previousSessionId:r}))}function zc(e,t,n){return!!Vc(e,t)&&(qc(e,t,n),!0)}async function qc(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===aa.Custom}(e))return t(e)}catch(e){return kc&&D.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Ic?"addEventSizeExceeded":"addEvent";kc&&D.error(t),await e.stop({reason:n});const r=nt();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function Vc(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Qa(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Tc(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function Kc(e){return!e.type}function Gc(e){return"transaction"===e.type}function Yc(e){return"feedback"===e.type}function Jc(e){const t=function(){const e=nt();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!Kc(n)&&!Gc(n))return;const o=r&&r.statusCode;t&&(!o||o<200||o>=300)||(Gc(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function Xc(e){return t=>{e.isEnabled()&&Kc(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){tc(e,pc({category:"replay.hydrate-error"}))}}(e,t)}}function Zc(e,t=!1){const n=t?Jc(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!Kc(t)&&!Gc(t)&&!Yc(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(Yc(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:aa.Custom,timestamp:1e3*t.timestamp,data:{timestamp:t.timestamp,tag:"breadcrumb",payload:{category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return kc&&D.log("[Replay] Ignoring error from rrweb internals",t),null;const o=function(e,t){return"buffer"===e.recordingMode&&t.message!==Yi&&!(!t.exception||t.type)&&Lc(e.getOptions().errorSampleRate)}(e,t);return(o||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function Qc(e,t){return t.map((({type:t,start:n,end:r,name:o,data:i})=>{const s=e.throttledAddEvent({type:aa.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:i}}});return"string"==typeof s?Promise.resolve(null):s}))}function eu(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(Qc(e,[n]),!1))))}}function tu(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!kc||!e.getOptions()._experiments.traceInternals)&&fi(t,nt())}(e,t.name)||e.addUpdate((()=>(Qc(e,[t]),!0))))}function nu(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,o=r[jo];if(!t||!n||!o)return null;const{method:i,url:s,status_code:a}=o;return void 0===s?null:{type:"resource.xhr",name:s,start:t/1e3,end:n/1e3,data:{method:i,statusCode:a}}}(t);tu(e,n)}}function ru(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=du(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function ou(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function iu(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[du(e)];if(!e)return[void 0]}catch(t){return kc&&D.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return kc&&D.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function su(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function au(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:W({method:i,statusCode:s,request:a,response:c})}}function cu(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function uu(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:i}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>Zi,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,Zi);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,i&&i.length>0&&(r._meta={warnings:i}),r}function lu(e,t){return Object.keys(e).reduce(((n,r)=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=e[r]),n}),{})}function du(e){return new URLSearchParams(e).toString()}function pu(e,t){const n=function(e,t=Vi.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Vi.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return A(n,t)}async function hu(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=e.data,d=pu(s,n.networkDetailAllowUrls)&&!pu(s,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return gu(e[0],t);if(2===e.length)return gu(e[1],t);return{}}(n,t):{};if(!e)return uu(o,r,void 0);const i=fu(n),[s,a]=iu(i),c=uu(o,r,s);if(a)return su(c,a);return c}(n,t.input,u):cu(u),h=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},o,i){if(!e&&void 0!==i)return cu(i);const s=o?mu(o.headers,r):{};if(!o||!t&&void 0!==i)return uu(s,i,void 0);const[a,c]=await async function(e){const t=function(e){try{return e.clone()}catch(e){kc&&D.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return kc&&D.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(o),u=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:o,headers:i}){try{const s=e&&e.length&&void 0===r?ru(e,n):r;return o?uu(i,s,t?e:void 0):cu(s)}catch(e){return kc&&D.warn("[Replay] Failed to serialize response body",e),uu(i,r,void 0)}}(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:i,captureDetails:e,headers:s});if(c)return su(u,c);return u}(d,n,t.response,l);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:p,response:h}}(e,t,n),o=au("resource.fetch",r);tu(n.replay,o)}catch(e){kc&&D.error("[Replay] Failed to capture fetch breadcrumb",e)}}function fu(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function mu(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function gu(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?mu(n,t):Array.isArray(n)?{}:lu(n,t):{}}async function yu(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!a||!pu(c,n.networkDetailAllowUrls)||pu(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:l,request:cu(d),response:cu(p)}}const h=a[jo],f=h?lu(h.request_headers,n.networkRequestHeaders):{},m=lu(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?iu(s):[void 0],[v,b]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return kc&&D.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return kc&&D.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return kc&&D.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(a):[void 0],_=uu(f,d,g),w=uu(m,p,v);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:l,request:y?su(_,y):_,response:b?su(w,b):w}}(e,t,n),o=au("resource.xhr",r);tu(n.replay,o)}catch(e){kc&&D.error("[Replay] Failed to capture xhr breadcrumb",e)}}function vu(e,t,n){const{xhr:r,input:o}=t;if(!r)return;const i=ru(o,n.textEncoder),s=r.getResponseHeader("content-length")?ou(r.getResponseHeader("content-length")):function(e,t,n){try{return ru("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==i&&(e.data.request_body_size=i),void 0!==s&&(e.data.response_body_size=s)}function bu(e){const t=nt();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(vu(t,n,e),yu(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:o}=t,i=ru(r?fu(r):void 0,n.textEncoder),s=o?ou(o.headers.get("content-length")):void 0;void 0!==i&&(e.data.request_body_size=i),void 0!==s&&(e.data.response_body_size=s)}(t,n,e),hu(t,n,e))}catch(e){kc&&D.warn("Error when enriching network breadcrumb")}}(c,e,t))):(Bo(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:o}=e;if(!n)return null;const{method:i,url:s}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:s,data:{method:i,statusCode:o?o.status:void 0}}}(t);tu(e,n)}}(e)),Fo(nu(e)))}catch(e){}}let _u=null;const wu=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(_u===t||!t)return null;if(_u=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return pc(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>Qi?(n=!0,`${e.slice(0,Qi)}…`):e;if("object"==typeof e)try{const t=Pe(e,7);return JSON.stringify(t).length>Qi?(n=!0,`${JSON.stringify(t,null,2).slice(0,Qi)}…`):t}catch(e){}return e}));return pc({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return pc(t)}(t);n&&tc(e,n)};function Su(e){return!(!e||!e.on)}function ku(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Eu(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(kc&&D.warn("[Replay] Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&dc(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!zc(e,n,o))return!0;if(!o)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;zc(e,function(e){const t=e.getOptions();return{type:aa.Custom,timestamp:Date.now(),data:{tag:"options",payload:{sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(Tc(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&Fc(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function Tu({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){const s=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=nt(),p=rt(),h=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&h&&f&&i.sampled))return;const m={type:Gi,replay_start_timestamp:l/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,o);const i=await Le(e.getOptions(),r,o,t,e,Se());if(!i)return null;i.platform=i.platform||"javascript";const s=e.getSdkMetadata&&e.getSdkMetadata(),{name:a,version:c}=s&&s.sdk||{};return i.sdk={...i.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},i}({scope:p,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),void Tc("An event processor returned `null`, will not send event.");delete g.sdkProcessingMetadata;const y=function(e,t,n,r){return Fn(Kn(e,Vn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,s,f,d.getOptions().tunnel);let v;try{v=await h.send(y)}catch(e){const t=new Error(Yi);try{t.cause=e}catch(e){}throw t}if(!v)return v;if("number"==typeof v.statusCode&&(v.statusCode<200||v.statusCode>=300))throw new xu(v.statusCode);const b=ir({},v);if(or(b,"replay"))throw new Cu(b);return v}class xu extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Cu extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Iu(e,t={count:0,interval:Ji}){const{recordingData:n,options:r}=e;if(n.length)try{return await Tu(e),!0}catch(n){if(n instanceof xu||n instanceof Cu)throw n;if(qe("Replays",{_retryCount:t.count}),kc&&r._experiments&&r._experiments.captureExceptions&&Be(n),t.count>=Xi){const e=new Error(`${Yi} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await Iu(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const Ou="__THROTTLED",Du="__SKIPPED";function Ru(e,t,n){const r=new Map;let o=!1;return(...i)=>{const s=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(s),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?Du:Ou}o=!1;const a=r.get(s)||0;return r.set(s,a+1),e(...i)}}class Mu{constructor({options:e,recordingOptions:t}){Mu.prototype.__init.call(this),Mu.prototype.__init2.call(this),Mu.prototype.__init3.call(this),Mu.prototype.__init4.call(this),Mu.prototype.__init5.call(this),Mu.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,i;const s=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==i&&clearTimeout(i),o=i=void 0}function u(){return o&&clearTimeout(o),o=setTimeout(a,t),s&&void 0===i&&(i=setTimeout(a,s)),r}return u.cancel=c,u.flush=function(){return void 0!==o||void 0!==i?a():r},u}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Ru(((e,t)=>function(e,t,n){return Vc(e,t)?qc(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new cc(this,o))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",xc(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");xc("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const e=Hc({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");xc("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=Hc({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._options._experiments.canvas;this._stopRecording=Ja({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:Eu(this),onMutation:this._onMutationHandler,...e&&e.manager&&{recordCanvas:!0,getCanvasManager:e.manager,...ns[e.quality||"medium"]||ns.medium}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Tc("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Nc(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Tc("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Tc("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Tc("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Bc(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Vi.location.pathname}${Vi.location.hash}${Vi.location.search}`,t=`${Vi.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Ou){const e=pc({category:"replay.throttled"});this.addUpdate((()=>!zc(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||rt().getTransaction();if(e&&["route","custom"].includes(e.metadata.source))return e.name}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Pc({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){kc&&D.error("[Replay]",e),kc&&this._options._experiments&&this._options._experiments.captureExceptions&&Be(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Hc({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!Wc(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Vi.document.addEventListener("visibilitychange",this._handleVisibilityChange),Vi.addEventListener("blur",this._handleWindowBlur),Vi.addEventListener("focus",this._handleWindowFocus),Vi.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=rt(),n=nt();t.addScopeListener(wu(e)),Po(gc(e)),ho(eu(e)),bu(e);const r=Zc(e,!Su(n));n&&n.addEventProcessor?n.addEventProcessor(r):_r(r),Su(n)&&(n.on("beforeSendEvent",Xc(e)),n.on("afterSendEvent",Jc(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&(e.flush(),t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r))})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=Sc(this)}_removeListeners(){try{Vi.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Vi.removeEventListener("blur",this._handleWindowBlur),Vi.removeEventListener("focus",this._handleWindowFocus),Vi.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Vi.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=pc({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=pc({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{vc(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;Uc(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Tc("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:aa.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(_c).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Qc(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(Qc(e,[ku(Vi.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Iu({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=nt();t&&t.recordDroppedEvent("send_error","replay")}}else kc&&D.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(kc&&D.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return Tc(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const i=this.eventBuffer;if(i&&0===this.session.segmentId&&!i.hasCheckout&&Tc("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){kc&&D.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Fc(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=pc({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Pu(e,t,n,r){const o=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&o.push(`.${n}`),O((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),o.join(",")}const Au='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Nu=["content-length","content-type","accept"];let Lu=!1;class ju{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:i=!0,workerUrl:s,_experiments:a={},sessionSampleRate:c,errorSampleRate:u,maskAllText:l=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:v=[],networkCaptureBodies:b=!0,networkRequestHeaders:_=[],networkResponseHeaders:w=[],mask:S=[],maskAttributes:k=["title","placeholder"],unmask:E=[],block:T=[],unblock:x=[],ignore:C=[],maskFn:I,beforeAddRecordingEvent:O,beforeErrorSampling:D,blockClass:R,blockSelector:M,maskInputOptions:P,maskTextClass:A,maskTextSelector:N,ignoreClass:L}={}){this.name=ju.id;const j=function({mask:e,unmask:t,block:n,unblock:r,ignore:o,blockClass:i,blockSelector:s,maskTextClass:a,maskTextSelector:c,ignoreClass:u}){const l={maskTextSelector:Pu(e,[".sentry-mask","[data-sentry-mask]"],a,c),unmaskTextSelector:Pu(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:Pu(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],i,s),unblockSelector:Pu(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Pu(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return i instanceof RegExp&&(l.blockClass=i),a instanceof RegExp&&(l.maskTextClass=a),l}({mask:S,unmask:E,block:T,unblock:x,ignore:C,blockClass:R,blockSelector:M,maskTextClass:A,maskTextSelector:N,ignoreClass:L});if(this._recordingOptions={maskAllInputs:d,maskAllText:l,maskInputOptions:{...P||{},password:!0},maskTextFn:I,maskInputFn:I,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i:i}({maskAttributes:k,maskAllText:l,privacyOptions:j,key:e,value:t,el:n}),...j,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,ts),stickySession:o,sessionSampleRate:c,errorSampleRate:u,useCompression:i,workerUrl:s,blockAllMedia:p,maskAllInputs:d,maskAllText:l,mutationBreadcrumbLimit:h,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:y,networkDetailDenyUrls:v,networkCaptureBodies:b,networkRequestHeaders:Fu(_),networkResponseHeaders:Fu(w),beforeAddRecordingEvent:O,beforeErrorSampling:D,_experiments:a},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof u&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${u} })`),this._initialOptions.errorSampleRate=u),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Au}`:Au),this._isInitialized&&yi())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Lu}set _isInitialized(e){Lu=e}setupOnce(){yi()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&this._replay.initializeSampling()}_setup(){const e=function(e){const t=nt(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...W(e)};if(!n)return O((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&O((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new Mu({options:e,recordingOptions:this._recordingOptions})}}function Fu(e){return[...Nu,...e.map((e=>e.toLowerCase()))]}ju.__initStatic();const $u=v.n2,Bu="#ffffff",Uu="inherit",Wu="rgba(108, 95, 199, 1)",Hu={fontFamily:"'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:Bu,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:Wu,submitBorder:Wu,submitOutlineFocus:"#29232f",submitForeground:Bu,submitForegroundHover:Bu,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Uu,inputForeground:Uu,inputBorder:"var(--border)",inputOutlineFocus:Wu},zu=Hu,qu={...Hu,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Vu="widget",Ku="api";async function Gu({feedback:{message:e,email:t,name:n,source:r,url:o}},{includeReplay:i=!0}={}){const s=nt(),a=s&&s.getTransport(),c=s&&s.getDsn();if(!s||!a||!c)return;const u={contexts:{feedback:{contact_email:t,name:n,message:e,url:o,source:r}},type:"feedback"};return Xe((async e=>{e.clearBreadcrumbs(),[Ku,Vu].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const o=await Le(e.getOptions(),n,r,t,e,Se());return null===o?(e.recordDroppedEvent("event_processor","feedback",n),null):(o.platform=o.platform||"javascript",o)}({scope:e,client:s,event:u});if(!t)return;s.emit&&s.emit("beforeSendFeedback",t,{includeReplay:Boolean(i)});const n=fr(t,c,s.getOptions()._metadata,s.getOptions().tunnel);let o;try{o=await a.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(o){if("number"==typeof o.statusCode&&(o.statusCode<200||o.statusCode>=300))throw new Error("Unable to send Feedback");return o}}))}const Yu="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Ju(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Xu(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n  `}function Zu({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const o=$u.document,i=o.createElement("div");i.id=e;const s=i.attachShadow({mode:"open"});return s.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${Xu("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Xu(n.dark)}\n  }\n}`:""}\n}`,r}(o,t,{dark:n,light:r})),s.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: 20px;\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: 6px;\n  color: var(--input-foreground);\n  font-size: 14px;\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: 12px;\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(o)),{shadow:s,host:i}}catch(e){throw D.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Qu(e,t,n){if(!e)return;e.hideError();try{const e=await function({name:e,email:t,message:n,source:r=Ku,url:o=k()},i={}){if(!n)throw new Error("Unable to submit feedback with empty message");return Gu({feedback:{name:e,email:t,message:n,url:o,source:r}},i)}({...t,source:Vu},n);return e}catch(t){Yu&&D.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function el(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const tl=20,nl="http://www.w3.org/2000/svg";function rl(e,t,...n){const r=$u.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)ol(r,e);return r}function ol(e,t){const n=$u.document;if(null!=t)if(Array.isArray(t))for(const n of t)ol(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function il({buttonLabel:e,onClick:t}){const n=rl("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>$u.document.createElementNS(nl,e),t=el(e("svg"),{class:"feedback-icon",width:`${tl}`,height:`${tl}`,viewBox:`0 0 ${tl} ${tl}`,fill:"none"}),n=el(e("g"),{clipPath:"url(#clip0_57_80)"}),r=el(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),i=el(e("clipPath"),{id:"clip0_57_80"}),s=el(e("rect"),{width:`${tl}`,height:`${tl}`,fill:"white"});return i.appendChild(s),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(s),{get el(){return t}}}().el,e?rl("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function sl(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function al({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:o,messagePlaceholder:i,cancelButtonLabel:s,submitButtonLabel:a,showName:c,showEmail:u,isNameRequired:l,isEmailRequired:d,defaultName:p,defaultEmail:h,onCancel:f,onSubmit:m}){const{el:g}=function({label:e}){return{el:rl("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:a});const y=rl("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const v=rl("input",{id:"name",type:c?"text":"hidden","aria-hidden":c?"false":"true",name:"name",required:l,className:"form__input",placeholder:t,value:p}),b=rl("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:d,className:"form__input",placeholder:r,value:h}),_=rl("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:i}),w=rl("button",{type:"button",className:"btn btn--default","aria-label":s,onClick:e=>{f&&f(e)}},s),S=rl("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(m){const t=new FormData(e.target),n={name:sl(t,"name"),email:sl(t,"email"),message:sl(t,"message")};m(n)}}catch(e){}}},[y,c&&rl("label",{htmlFor:"name",className:"form__label"},[rl("span",{className:"form__label__text"},e,l&&rl("span",{className:"form__label__text--required"}," (required)")),v]),!c&&v,u&&rl("label",{htmlFor:"email",className:"form__label"},[rl("span",{className:"form__label__text"},n,d&&rl("span",{className:"form__label__text--required"}," (required)")),b]),!u&&b,rl("label",{htmlFor:"message",className:"form__label"},[rl("span",{className:"form__label__text"},o,rl("span",{className:"form__label__text--required"}," (required)")),_]),rl("div",{className:"btn-group"},[g,w])]);return{get el(){return S},showError:function(e){y.textContent=e,y.classList.remove("form__error-container--hidden"),y.setAttribute("aria-hidden","false")},hideError:function(){y.textContent="",y.classList.add("form__error-container--hidden"),y.setAttribute("aria-hidden","true")}}}const cl="http://www.w3.org/2000/svg";function ul({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:o,isEmailRequired:i,colorScheme:s,defaultName:a,defaultEmail:c,onClosed:u,onCancel:l,onSubmit:d,...p}){let h=null;function f(){h&&(h.open=!1)}const{el:m,showError:g,hideError:y}=al({showEmail:r,showName:n,isEmailRequired:i,isNameRequired:o,defaultName:a,defaultEmail:c,onSubmit:d,onCancel:l,...p});return h=rl("dialog",{className:"dialog",open:!0,onClick:function(){f(),u&&u()}},rl("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},rl("h2",{className:"dialog__header"},e,t&&rl("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>$u.document.createElementNS(cl,e),n=el(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=el(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const o=t("defs"),i=t("style");return"system"===e&&(i.textContent="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),i.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,o.append(i),n.append(o),{get el(){return n}}}({colorScheme:s}).el)),m)),{get el(){return h},showError:g,hideError:y,open:function(){h&&(h.open=!0)},close:f,checkIsOpen:function(){return h&&!0===h.open||!1}}}const ll=16,dl=17,pl="http://www.w3.org/2000/svg";function hl({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=rl("div",{className:"success-message",onClick:n},function(){const e=e=>$u.document.createElementNS(pl,e),t=el(e("svg"),{class:"success-icon",width:`${ll}`,height:`${dl}`,viewBox:`0 0 ${ll} ${dl}`,fill:"none"}),n=el(e("g"),{clipPath:"url(#clip0_57_156)"}),r=el(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=el(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const i=e("defs"),s=el(e("clipPath"),{id:"clip0_57_156"}),a=el(e("rect"),{width:`${ll}`,height:`${ll}`,fill:"white",transform:"translate(0 0.5)"});return s.appendChild(a),i.appendChild(s),t.appendChild(i).appendChild(s).appendChild(a),{get el(){return t}}}().el,e);return{el:r,remove:n}}function fl({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let o,i,s=!1;async function a(t){if(!i)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void i.showError(`Please enter in the following required fields: ${r.join(", ")}`);await Qu(i,t)?(p(),function(){if(e)try{const t=hl({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),c()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){D.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){o&&o.show()}function u(){o&&o.hide()}function l(){try{if(i)return i.open(),s=!0,void(n.onFormOpen&&n.onFormOpen());const t=n.useSentryUser,r=rt(),o=r&&r.getUser();if(i=ul({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,defaultName:t&&o&&o[t.name]||"",defaultEmail:t&&o&&o[t.email]||"",onClosed:()=>{c(),s=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{d(),c()},onSubmit:a}),!i.el)throw new Error("Unable to open Feedback dialog");e.appendChild(i.el),u(),n.onFormOpen&&n.onFormOpen()}catch(e){D.error(e)}}function d(){i&&(i.close(),s=!1,n.onFormClose&&n.onFormClose())}function p(){if(i){d();const e=i.el;e&&e.remove(),i=void 0}}function h(){s||l(),u()}return r?r.addEventListener("click",h):t&&(o=il({buttonLabel:n.buttonLabel,onClick:h}),o.el&&e.appendChild(o.el)),{get actor(){return o},get dialog(){return i},showActor:c,hideActor:u,removeActor:function(){o&&o.el&&o.el.remove()},openDialog:l,closeDialog:d,removeDialog:p}}const ml=$u.document;class gl{static __initStatic(){this.id="Feedback"}constructor({id:e="sentry-feedback",showBranding:t=!0,autoInject:n=!0,showEmail:r=!0,showName:o=!0,useSentryUser:i={email:"email",name:"username"},isEmailRequired:s=!1,isNameRequired:a=!1,themeDark:c,themeLight:u,colorScheme:l="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:h="Send Bug Report",formTitle:f="Report a Bug",emailPlaceholder:m="your.email@example.org",emailLabel:g="Email",messagePlaceholder:y="What's the bug? What did you expect?",messageLabel:v="Description",namePlaceholder:b="Your Name",nameLabel:_="Name",successMessageText:w="Thank you for your report!",onFormClose:S,onFormOpen:k,onSubmitError:E,onSubmitSuccess:T}={}){this.name=gl.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={id:e,showBranding:t,autoInject:n,isEmailRequired:s,isNameRequired:a,showEmail:r,showName:o,useSentryUser:i,colorScheme:l,themeDark:{...qu,...c},themeLight:{...zu,...u},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:h,formTitle:f,emailLabel:g,emailPlaceholder:m,messageLabel:v,messagePlaceholder:y,nameLabel:_,namePlaceholder:b,successMessageText:w,onFormClose:S,onFormOpen:k,onSubmitError:E,onSubmitSuccess:T}}setupOnce(){if(yi())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){Yu&&D.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=Ju(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?ml.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return Yu&&D.error("[Feedback] Unable to attach to target element"),null;const o=fl({shadow:t,options:n,attachTo:r});return this._widgets.add(o),this._widget||(this._widget=o),o}))}catch(e){return Yu&&D.error(e),null}}createWidget(e){try{return this._createWidget(Ju(this.options,e||{}))}catch(e){return Yu&&D.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){Yu&&D.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=ml.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=fl({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  line-height: 25px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: 12px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  padding: 12px 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(ml)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:o,themeDark:i}=e,{shadow:s,host:a}=Zu({id:t,colorScheme:r,themeLight:o,themeDark:i});this._shadow=s,this._host=a,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&ml.body.appendChild(this._host),r}}function yl(e,t,n,r,o="auto.http.browser"){if(!an()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const n=r[t];if(n){if(e.response){n.setHttpStatus(e.response.status);const t=e.response&&e.response.headers&&e.response.headers.get("content-length");if(t){const e=parseInt(t);e>0&&n.setData("http.response_content_length",e)}}else e.error&&n.setStatus("internal_error");n.end(),delete r[t]}return}const s=rt(),a=nt(),c=s.getSpan(),{method:u,url:l}=e.fetchData,d=i&&c?c.startChild({data:{url:l,type:"fetch","http.method":u},description:`${u} ${l}`,op:"http.client",origin:o}):void 0;if(d&&(e.fetchData.__span=d.spanId,r[d.spanId]=d),n(e.fetchData.url)&&a){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,o){const i=o||n.getSpan(),s=i&&i.transaction,{traceId:a,sampled:c,dsc:u}=n.getPropagationContext(),l=i?i.toTraceparent():qt(a,void 0,c),d=s?s.getDynamicSamplingContext():u||en(a,t,n),p=Bt(d),h="undefined"!=typeof Request&&g(e,Request)?e.headers:r.headers;if(h){if("undefined"!=typeof Headers&&g(h,Headers)){const e=new Headers(h);return e.append("sentry-trace",l),p&&e.append(Lt,p),e}if(Array.isArray(h)){const e=[...h,["sentry-trace",l]];return p&&e.push([Lt,p]),e}{const e="baggage"in h?h.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...h,"sentry-trace":l,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":l,baggage:p}}(t,a,s,n,d)}return d}gl.__initStatic();const vl=["localhost",/^\/(?!\/)/],bl={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:vl,tracePropagationTargets:vl};function _l(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:o,shouldCreateSpanForRequest:i,enableHTTPTimings:s}={traceFetch:bl.traceFetch,traceXHR:bl.traceXHR,...e},a="function"==typeof i?i:e=>!0,c=e=>function(e,t){return A(e,t||vl)}(e,r||o),u={};t&&Bo((e=>{const t=yl(e,a,c,u);s&&t&&wl(t)})),n&&Fo((e=>{const t=function(e,t,n,r){const o=e.xhr,i=o&&o[jo];if(!an()||!o||o.__sentry_own_request__||!i)return;const s=t(i.url);if(e.endTimestamp&&s){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==i.status_code&&(t.setHttpStatus(i.status_code),t.end(),delete r[e]))}const a=rt(),c=a.getSpan(),u=s&&c?c.startChild({data:{type:"xhr","http.method":i.method,url:i.url},description:`${i.method} ${i.url}`,op:"http.client",origin:"auto.http.browser"}):void 0;u&&(o.__sentry_xhr_span_id__=u.spanId,r[o.__sentry_xhr_span_id__]=u);if(o.setRequestHeader&&n(i.url))if(u){const e=u&&u.transaction,t=Bt(e&&e.getDynamicSamplingContext());kl(o,u.toTraceparent(),t)}else{const e=nt(),{traceId:t,sampled:n,dsc:r}=a.getPropagationContext();kl(o,qt(t,void 0,n),Bt(r||(e?en(t,e,a):void 0)))}return u}(e,a,c,u);s&&t&&wl(t)}))}function wl(e){const t=e.data.url;if(!t)return;const n=Fi("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!ie.Z1)return r;return[...r,["http.request.redirect_start",Sl(e.redirectStart)],["http.request.fetch_start",Sl(e.fetchStart)],["http.request.domain_lookup_start",Sl(e.domainLookupStart)],["http.request.domain_lookup_end",Sl(e.domainLookupEnd)],["http.request.connect_start",Sl(e.connectStart)],["http.request.secure_connection_start",Sl(e.secureConnectionStart)],["http.request.connection_end",Sl(e.connectEnd)],["http.request.request_start",Sl(e.requestStart)],["http.request.response_start",Sl(e.responseStart)],["http.request.response_end",Sl(e.responseEnd)]]})(r).forEach((t=>e.setData(...t))),setTimeout(n)}}))}))}function Sl(e=0){return((ie.Z1||performance.timeOrigin)+e)/1e3}function kl(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(Lt,n)}catch(e){}}function El(e){return"number"==typeof e&&isFinite(e)}function Tl(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const xl=2147483647;function Cl(e){return e/1e3}function Il(){return _i&&_i.addEventListener&&_i.performance}let Ol,Dl,Rl=0,Ml={};function Pl(){const e=Il();if(e&&ie.Z1){e.mark&&_i.performance.mark("sentry-tracing-init");const t=Hi("fid",(({metric:e})=>{const t=e.entries.pop();if(!t)return;const n=Cl(ie.Z1),r=Cl(t.startTime);vi&&D.log("[Measurements] Adding FID"),Ml.fid={value:e.value,unit:"millisecond"},Ml["mark.fid"]={value:n+r,unit:"second"}}),Ui,Ni),n=function(e){return Hi("cls",e,Bi,Ai)}((({metric:e})=>{const t=e.entries.pop();t&&(vi&&D.log("[Measurements] Adding CLS"),Ml.cls={value:e.value,unit:""},Dl=t)})),r=ji((({metric:e})=>{const t=e.entries.pop();t&&(vi&&D.log("[Measurements] Adding LCP"),Ml.lcp={value:e.value,unit:"millisecond"},Ol=t)}));return()=>{t(),n(),r()}}return()=>{}}function Al(e){const t=Il();if(!t||!_i.performance.getEntries||!ie.Z1)return;vi&&D.log("[Tracing] Adding & adjusting spans using Performance API");const n=Cl(ie.Z1),r=t.getEntries();let o,i;if(r.slice(Rl).forEach((t=>{const r=Cl(t.startTime),s=Cl(t.duration);if(!("navigation"===e.op&&n+r<e.startTimestamp))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{Nl(e,t,r,n)})),Nl(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Nl(e,t,"fetch",n,"cache","domainLookupStart"),Nl(e,t,"domainLookup",n,"DNS"),function(e,t,n){Tl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+Cl(t.requestStart),endTimestamp:n+Cl(t.responseEnd)}),Tl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+Cl(t.responseStart),endTimestamp:n+Cl(t.responseEnd)})}(e,t,n)}(e,t,n),o=n+Cl(t.responseStart),i=n+Cl(t.requestStart);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const i=o+n,s=i+r;Tl(e,{description:t.name,endTimestamp:s,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i})}(e,t,r,s,n);const o=Ii(),i=t.startTime<o.firstHiddenTime;"first-paint"===t.name&&i&&(vi&&D.log("[Measurements] Adding FP"),Ml.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(vi&&D.log("[Measurements] Adding FCP"),Ml.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":{const o=t.name.replace(_i.location.origin,"");!function(e,t,n,r,o,i){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const s={};Ll(s,t,"transferSize","http.response_transfer_size"),Ll(s,t,"encodedBodySize","http.response_content_length"),Ll(s,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(s["resource.render_blocking_status"]=t.renderBlockingStatus);const a=i+r,c=a+o;Tl(e,{description:n,endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:a,data:s})}(e,t,o,r,s,n);break}}})),Rl=Math.max(r.length-1,0),function(e){const t=_i.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),El(n.rtt)&&(Ml["connection.rtt"]={value:n.rtt,unit:"millisecond"}));El(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);El(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===e.op){"number"==typeof o&&(vi&&D.log("[Measurements] Adding TTFB"),Ml.ttfb={value:1e3*(o-e.startTimestamp),unit:"millisecond"},"number"==typeof i&&i<=o&&(Ml["ttfb.requestTime"]={value:1e3*(o-i),unit:"millisecond"})),["fcp","fp","lcp"].forEach((t=>{if(!Ml[t]||n>=e.startTimestamp)return;const r=Ml[t].value,o=n+Cl(r),i=Math.abs(1e3*(o-e.startTimestamp)),s=i-r;vi&&D.log(`[Measurements] Normalized ${t} from ${r} to ${i} (${s})`),Ml[t].value=i}));const t=Ml["mark.fid"];t&&Ml.fid&&(Tl(e,{description:"first input delay",endTimestamp:t.value+Cl(Ml.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete Ml["mark.fid"]),"fcp"in Ml||delete Ml.cls,Object.keys(Ml).forEach((t=>{e.setMeasurement(t,Ml[t].value,Ml[t].unit)})),function(e){Ol&&(vi&&D.log("[Measurements] Adding LCP Data"),Ol.element&&e.setTag("lcp.element",w(Ol.element)),Ol.id&&e.setTag("lcp.id",Ol.id),Ol.url&&e.setTag("lcp.url",Ol.url.trim().slice(0,200)),e.setTag("lcp.size",Ol.size));Dl&&Dl.sources&&(vi&&D.log("[Measurements] Adding CLS Data"),Dl.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,w(t.node)))))}(e)}Ol=void 0,Dl=void 0,Ml={}}function Nl(e,t,n,r,o,i){const s=i?t[i]:t[`${n}End`],a=t[`${n}Start`];a&&s&&Tl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:o||n,startTimestamp:r+Cl(a),endTimestamp:r+Cl(s)})}function Ll(e,t,n,r){const o=t[n];null!=o&&o<xl&&(e[r]=o)}const jl={...nn,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!_i||!_i.location)return void(vi&&D.warn("Could not initialize routing instrumentation due to invalid location"));let r,o=_i.location.href;t&&(r=e({name:_i.location.pathname,startTimestamp:ie.Z1?ie.Z1/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&ho((({to:t,from:n})=>{void 0===n&&o&&-1!==o.indexOf(t)?o=void 0:n!==t&&(o=void 0,r&&(vi&&D.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:_i.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...bl};class Fl{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,pn(),vi&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...jl,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=Pl(),this.options.enableLongTask&&Fi("longtask",(({entries:e})=>{for(const t of e){const e=Vt();if(!e)return;const n=Cl(ie.Z1+t.startTime),r=Cl(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}})),this.options._experiments.enableInteractions&&Fi("event",(({entries:e})=>{for(const t of e){const e=Vt();if(!e)return;if("click"===t.name){const n=Cl(ie.Z1+t.startTime),r=Cl(t.duration),o={description:w(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},i=E(t.target);i&&(o.data={"ui.component_name":i}),e.startChild(o)}}}))}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:i,startTransactionOnPageLoad:s,markBackgroundTransactions:a,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:l,enableHTTPTimings:d,_experiments:p}=this.options,h=r&&r.tracePropagationTargets,f=h||this.options.tracePropagationTargets;vi&&this._hasSetTracePropagationTargets&&h&&D.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),s,i),a&&(_i&&_i.document?_i.document.addEventListener("visibilitychange",(()=>{const e=Vt();if(_i.document.hidden&&e){const t="cancelled";vi&&D.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):vi&&D.warn("[Tracing] Could not set up background tab detection due to lack of global document")),p.enableInteractions&&this._registerInteractionListener(),_l({traceFetch:c,traceXHR:u,tracePropagationTargets:f,shouldCreateSpanForRequest:l,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(vi&&D.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:o,heartbeatInterval:i}=this.options,s="pageload"===e.op,a=s?$l("sentry-trace"):"",c=s?$l("baggage"):"",{traceparentData:u,dynamicSamplingContext:l,propagationContext:d}=zt(a,c),p={...e,...u,metadata:{...e.metadata,dynamicSamplingContext:u&&!l?{}:l},trimEnd:!0},h="function"==typeof n?n(p):p,f=void 0===h?{...p,sampled:!1}:h;f.metadata=f.name!==p.name?{...f.metadata,source:"custom"}:f.metadata,this._latestRouteName=f.name,this._latestRouteSource=f.metadata&&f.metadata.source,!1===f.sampled&&vi&&D.log(`[Tracing] Will not send ${f.op} transaction because of beforeNavigate.`),vi&&D.log(`[Tracing] Starting ${f.op} transaction on scope`);const{location:m}=_i,g=dn(t,f,r,o,!0,{location:m},i),y=t.getScope();return s&&u?y.setPropagationContext(d):y.setPropagationContext({traceId:g.traceId,spanId:g.spanId,parentSpanId:g.parentSpanId,sampled:g.sampled}),g.registerBeforeFinishCallback((e=>{this._collectWebVitals(),Al(e)})),g}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,o="ui.action.click",i=Vt();if(i&&i.op&&["navigation","pageload"].includes(i.op))return void(vi&&D.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(vi&&D.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`));if(!this._latestRouteName)return void(vi&&D.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const s=this._getCurrentHub(),{location:a}=_i,c={name:this._latestRouteName,op:o,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};e=dn(s,c,t,n,!0,{location:a},r)};["click"].forEach((e=>{addEventListener(e,t,{once:!1,capture:!0})}))}}function $l(e){const t=(n=`meta[name=${e}]`,b.document&&b.document.querySelector?b.document.querySelector(n):null);var n;return t?t.getAttribute("content"):void 0}const Bl=100,Ul=5e3,Wl=36e5;function Hl(e,t){X&&D.info(`[Offline]: ${e}`,t)}function zl(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let o,i=Ul;function s(e,n,r){return o=["replay_event","replay_recording","client_report"],!Bn(e,((e,t)=>o.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var o}function a(e){r&&(o&&clearTimeout(o),o=setTimeout((async()=>{o=void 0;const e=await r.pop();e&&(Hl("Attempting to send previously queued event"),u(e).catch((e=>{Hl("Failed to retry sending",e)})))}),e),"number"!=typeof o&&o.unref&&o.unref())}function c(){o||(a(i),i=Math.min(2*i,Wl))}async function u(e){try{const t=await n.send(e);let r=Bl;if(t)if(t.headers&&t.headers["retry-after"])r=rr(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return a(r),i=Ul,t}catch(t){if(r&&await s(e,t,i))return await r.insert(e),c(),Hl("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&c(),{send:u,flush:e=>n.flush(e)}}}
// Copyright 2016, Jake Archibald
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//   http://www.apache.org/licenses/LICENSE-2.0
// distributed under the License is distributed on an "AS IS" BASIS,
// See the License for the specific language governing permissions and
// limitations under the License.
function ql(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function Vl(e){return ql(e.getAllKeys())}function Kl(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=ql(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await Wn(t,e.textEncoder);await function(e,t,n){return e((e=>Vl(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),ql(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>Vl(e).then((t=>{if(0!==t.length)return ql(e.get(t[0])).then((n=>(e.delete(t[0]),ql(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function o(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function i(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(o(e)))}const s=i(),a=[];for(;r.length;){const e=i(),t="number"==typeof e.length?e.length:void 0;a.push([e,t?o(t):i()])}return[s,a]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}function Gl(e){return function(e){return t=>e({...t,createStore:Kl})}(zl(e))}const Yl=1e6,Jl=String(0),Xl="main";let Zl="",Ql="",ed="",td=wr.navigator&&wr.navigator.userAgent||"",nd="";const rd=wr.navigator&&wr.navigator.language||wr.navigator&&wr.navigator.languages&&wr.navigator.languages[0]||"";const od=wr.navigator&&wr.navigator.userAgentData;var id;function sd(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Jl]:{name:Xl}}};if(!e.samples.length)return r;const o=e.samples[0].timestamp,i="number"==typeof performance.timeOrigin?performance.timeOrigin:ie.Z1||0,s=i-(ie.Z1||i);for(let i=0;i<e.samples.length;i++){const a=e.samples[i];if(void 0===a.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[i]={elapsed_since_start_ns:((a.timestamp+s-o)*Yl).toFixed(0),stack_id:t,thread_id:Jl};continue}let c=e.stacks[a.stackId];const u=[];for(;c;){u.push(c.frameId);const t=e.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const l={elapsed_since_start_ns:((a.timestamp+s-o)*Yl).toFixed(0),stack_id:n,thread_id:Jl};r.stacks[n]=u,r.samples[i]=l,n++}return r}(e):e}function ad(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&xr&&D.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),i=sd(n),s=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),a="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||se,runtime:{name:"javascript",version:wr.navigator.userAgent},os:{name:Zl,version:Ql,build_number:td},device:{locale:rd,model:nd,manufacturer:td,architecture:ed,is_emulator:!1},debug_meta:{images:ld(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||z(),trace_id:o,active_thread_id:Jl,relative_start_ns:"0",relative_end_ns:(1e6*(a-s)).toFixed(0)}]}}function cd(e){return"pageload"===e.op}"object"==typeof(id=od)&&null!==id&&"getHighEntropyValues"in id&&od.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(Zl=e.platform||"",ed=e.architecture||"",nd=e.model||"",Ql=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];td=`${t.brand} ${t.version}`}})).catch((e=>{}));const ud=new WeakMap;function ld(e){const t=v.n2._sentryDebugIds;if(!t)return[];const n=nt(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let i;const s=ud.get(o);s?i=s:(i=new Map,ud.set(o,i));const a=Object.keys(t).reduce(((e,n)=>{let r;const s=i.get(n);s?r=s:(r=o(n),i.set(n,r));for(let o=r.length-1;o>=0;o--){const i=r[o],s=i&&i.filename;if(i&&s){e[s]=t[n];break}}return e}),{}),c=[];for(const t of e)t&&a[t]&&c.push({type:"sourcemap",code_file:t,debug_id:a[t]});return c}let dd=!1;const pd=3e4;function hd(e){if(dd)return xr&&D.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.sampled)return xr&&D.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=nt(),n=t&&t.getOptions();if(!n)return xr&&D.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(xr&&D.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(xr&&D.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return xr&&D.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return xr&&D.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(xr&&D.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function fd(e,t,n,r){return function(e){return e.samples.length<2?(xr&&D.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(xr&&D.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?ad(e,t,n,r):null}const md=new Map;function gd(e){const t=md.get(e);return t&&md.delete(e),t}function yd(e){return e?hd(e)?vd(e):e:(xr&&D.log("[Profiling] Transaction is undefined, skipping profiling"),e)}function vd(e){let t;cd(e)&&(t=1e3*(0,ie.ph)());const n=function(){const e=wr.Profiler;if("function"!=typeof e)return void(xr&&D.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(pd/10);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){xr&&(D.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),D.log("[Profiling] Disabling profiling for current user session.")),dd=!0}}();if(!n)return e;xr&&D.log(`[Profiling] started profiling transaction: ${e.name||e.description}`);const r=z();async function o(){return e&&n?n.stop().then((t=>(i&&(wr.clearTimeout(i),i=void 0),xr&&D.log(`[Profiling] stopped profiling of transaction: ${e.name||e.description}`),t?(function(e,t){if(md.set(e,t),md.size>30){const e=md.keys().next().value;md.delete(e)}}(r,t),null):(xr&&D.log(`[Profiling] profiler returned null profile for: ${e.name||e.description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(xr&&D.log("[Profiling] error while stopping profiler:",e),null))):null}let i=wr.setTimeout((()=>{xr&&D.log("[Profiling] max profile duration elapsed, stopping profiling for:",e.name||e.description),o()}),pd);const s=e.end.bind(e);return e.end=function(){return e?(o().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),s()}),(()=>{s()})),e):s()},e}const bd="BrowserProfiling",_d=ct(bd,(()=>({name:bd,setup(e){const t=rt().getTransaction();t&&cd(t)&&hd(t)&&vd(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{hd(e)&&vd(e)})),e.on("beforeEnvelope",(e=>{if(!md.size)return;const t=function(e){const t=[];return Bn(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){xr&&D.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){xr&&D.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const i=gd(r);if(!i){xr&&D.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const s=fd(r,o,i,e);s&&n.push(s)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):D.warn("[Profiling] Client does not support hooks, profiling will be disabled")}})));let wd={};wr.Sentry&&wr.Sentry.Integrations&&(wd=wr.Sentry.Integrations);const Sd={...wd,...r,...o}},8518:function(e,t,n){function r(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function o(){return"npm"}n.d(t,{S:function(){return o},n:function(){return r}})},1422:function(e,t,n){n.d(t,{KV:function(){return o},l$:function(){return i}});var r=n(8518);function o(){return!(0,r.n)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function i(e,t){return e.require(t)}e=n.hmd(e)},1170:function(e,t,n){n.d(t,{Z1:function(){return p},ph:function(){return l},yW:function(){return u}});var r=n(1422),o=n(1235);e=n.hmd(e);const i=(0,o.Rf)(),s={nowSeconds:()=>Date.now()/1e3};const a=(0,r.KV)()?function(){try{return(0,r.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=i;if(!e||!e.now)return;return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),c=void 0===a?s:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},u=s.nowSeconds.bind(s),l=c.nowSeconds.bind(c);let d;const p=(()=>{const{performance:e}=i;if(!e||!e.now)return void(d="none");const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-r):t;return s||c<t?o<=c?(d="timeOrigin",e.timeOrigin):(d="navigationStart",a):(d="dateNow",r)})()},1235:function(e,t,n){
// Copyright (c) 2014-2022 Denis Pushkarev
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// The above copyright notice and this permission notice shall be included in
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
function r(e){return e&&e.Math==Math?e:void 0}n.d(t,{Rf:function(){return i},YO:function(){return s},n2:function(){return o}});const o="object"==typeof globalThis&&r(globalThis)||"object"==typeof window&&r(window)||"object"==typeof self&&r(self)||"object"==typeof n.g&&r(n.g)||function(){return this}()||{};function i(){return o}function s(e,t,n){const r=n||o,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}},1923:function(e,t,n){var r,o=(r=n(5752))&&"object"==typeof r&&"default"in r?r.default:r;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e.exports=o},7802:function(e,t,n){n.r(t);n(2726)},1875:function(e,t){function n(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function r(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const o=n(r);return(e,n)=>o.then((r=>n(r.transaction(t,e).objectStore(t))))}let o;function i(){return o||(o=r("keyval-store","keyval")),o}function s(e,t){return e("readonly",(e=>(e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},n(e.transaction))))}Object.defineProperty(t,"__esModule",{value:!0}),t.clear=function(e=i()){return e("readwrite",(e=>(e.clear(),n(e.transaction))))},t.createStore=r,t.del=function(e,t=i()){return t("readwrite",(t=>(t.delete(e),n(t.transaction))))},t.entries=function(e=i()){const t=[];return s(e,(e=>t.push([e.key,e.value]))).then((()=>t))},t.get=function(e,t=i()){return t("readonly",(t=>n(t.get(e))))},t.getMany=function(e,t=i()){return t("readonly",(t=>Promise.all(e.map((e=>n(t.get(e)))))))},t.keys=function(e=i()){const t=[];return s(e,(e=>t.push(e.key))).then((()=>t))},t.promisifyRequest=n,t.set=function(e,t,r=i()){return r("readwrite",(r=>(r.put(t,e),n(r.transaction))))},t.setMany=function(e,t=i()){return t("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),n(t.transaction))))},t.update=function(e,t,r=i()){return r("readwrite",(r=>new Promise(((o,i)=>{r.get(e).onsuccess=function(){try{r.put(t(this.result),e),o(n(r.transaction))}catch(e){i(e)}}}))))},t.values=function(e=i()){const t=[];return s(e,(e=>t.push(e.value))).then((()=>t))}},3029:function(e,t,n){n.r(t),n.d(t,{deleteDB:function(){return y},openDB:function(){return g},unwrap:function(){return m},wrap:function(){return f}});const r=(e,t)=>t.some((t=>e instanceof t));let o,i;const s=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return f(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),f(s.get(this))}:function(...t){return f(e.apply(m(this),t))}:function(t,...n){const r=e.call(m(this),t,...n);return c.set(r,t.sort?t.sort():[t]),f(r)}}function h(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));a.set(e,t)}(e),r(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function f(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(f(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=h(e);return t!==e&&(u.set(e,t),l.set(t,e)),t}const m=e=>l.get(e);function g(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=f(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(f(s.result),e.oldVersion,e.newVersion,f(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),a}function y(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),f(n).then((()=>{}))}const v=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],_=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(_.get(t))return _.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!v.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&i.done]))[0]};return _.set(t,i),i}d=(e=>({...e,get:(t,n,r)=>w(t,n)||e.get(t,n,r),has:(t,n)=>!!w(t,n)||e.has(t,n)}))(d)},1041:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var r=n(1319),o=n(8699),i=n(3429),s=Math.random()<1,a=function(){function e(e){var t=this;if(this.logExceptionInternal=function(e){t.logger.trackException(e)},this.logAndThrowExceptionInternal=function(e){throw t.logger.trackException(e),e},this.logEvent=function(e,n){t.logger.trackEvent(e,n)},null==e)throw new Error("'logger' cannot be null");this.logger=e}return e.create=function(t){if(null==t)throw new Error("'loggerProvider' cannot be null");self.LogManager=new e(t())},e.LogException=function(t){e.getOrCreateInstance().logExceptionInternal(t)},e.LogAndThrowException=function(t){e.getOrCreateInstance().logAndThrowExceptionInternal(t)},e.LogEvent=function(t,n){e.getOrCreateInstance().logEvent(t,n)},e.selectProvider=function(){return s&&i.isDebuggingSite?r.SentryLogger.initialize():new o.LoggerStub},e.getOrCreateInstance=function(){var t=self;return null==t.LogManager&&(console.warn("LogManager was not instantiated before (in entry file). Using dummy."),t.LogManager=new e(e.selectProvider())),t.LogManager},e}();t.Logger=a},8699:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStub=void 0;var n=function(){function e(){}return e.prototype.trackException=function(e){},e.prototype.trackEvent=function(e){},e}();t.LoggerStub=n},1319:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SentryLogger=void 0;var r=n(655),o=n(1750),i=n(928),s=n(3192),a=n(7621),c=function(){function e(e){this.sentryHub=e}return e.initialize=function(){var t=new o.BrowserClient({dsn:"https://d58a6b9c96364635b562983c2df90da8@autobugs-external.mindbox.ru/1354",transport:o.makeFetchTransport,integrations:o.defaultIntegrations,stackParser:o.defaultStackParser,sampleRate:.8});return new e(new o.Hub(t))},e.prototype.trackException=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,c,u,l,d,p,h;return r.__generator(this,(function(r){switch(r.label){case 0:t={serviceWorkerSettingsData:"",webpushApplicationData:"",webpushWorkerVersionsData:""},r.label=1;case 1:return r.trys.push([1,5,,6]),[4,i.SettingsRepository.getStringifiedData()];case 2:return n=r.sent(),[4,s.applicationDataStateRepository.getStringifiedData()];case 3:return o=r.sent(),[4,a.workerVersionsStateRepository.getStringifiedData()];case 4:return c=r.sent(),t={serviceWorkerSettingsData:n,webpushApplicationData:o,webpushWorkerVersionsData:c},[3,6];case 5:return r.sent(),[3,6];case 6:return r.trys.push([6,8,,9]),[4,i.SettingsRepository.getSettings()];case 7:return u=r.sent(),l=u.deviceUUID,d=u.endpointId,p=void 0===d?"":d,this.sentryHub.captureException(e,{captureContext:{tags:{deviceUUID:l,endpointId:p},extra:t}}),[3,9];case 8:return h=r.sent(),this.sentryHub.captureException(h,{captureContext:{extra:t}}),[3,9];case 9:return[2]}}))}))},e.prototype.trackEvent=function(e){return r.__awaiter(this,void 0,Promise,(function(){var t,n,o,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,i.SettingsRepository.getSettings()];case 1:return t=r.sent(),n=t.deviceUUID,o=t.endpointId,s=void 0===o?"":o,this.sentryHub.captureEvent(e,{captureContext:{tags:{deviceUUID:n,endpointId:s}}}),[3,3];case 2:return a=r.sent(),this.sentryHub.captureException(a),[3,3];case 3:return[2]}}))}))},e}();t.SentryLogger=c},3429:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isDebuggingSite=void 0;var r=n(4447);t.isDebuggingSite=r.isHostHash(["z77f623xe3x4yf568888888888888888","z5x713x6xf5688888888888888888888"])},4447:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isHostHash=void 0;var r=n(8995);t.isHostHash=function(e){try{var t=(null===self||void 0===self?void 0:self.location)||location;return e.indexOf(r.getHash(t.host))>-1}catch(e){return!1}}},8995:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getHash=t.sleep=void 0;t.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))};t.getHash=function(e){e.length%32>0&&(e+=Array(33-e.length%32).join("z"));var t="",n=[],r=0,o=0,i=0,s=0,a=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","1","2","3","4","5","6","7","8","9"];for(r=0;r<e.length;r++){var c=e.charCodeAt(r);n[o++]=c<127?255&c:127}var u=Math.ceil(n.length/32);for(r=0;r<n.length;r++)o+=n[r],++i!=u&&r!=n.length-1||(t+=(s=Math.floor(o/i))<32?"0":s>126?"z":a[Math.floor((s-32)/2.76)],o=i=0);return t}},2594:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebpushApiIntegrationController=void 0;var r=n(655),o=n(1041),i=n(4096),s=n(2904),a=n(9832),c=function(){function e(e){var t=e.settingsRepository,n=e.getFetch,r=e.moduleInfo,o=void 0===r?a.webpushModuleInfo:r,i=e.version,c=void 0===i?s.version:i;this.getHeaders=function(){return{Accept:"application/json","Content-Type":"application/json"}},this.buildUri=function(e,t){return t.apiUri+e},this.settingsRepository=t,this.getFetch=n,this.moduleInfo=o,this.version=c}return e.prototype.trackClick=function(e){return r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(t){return[2,this.sendOperation(i.WebPushOperation.TrackClick,e)]}))}))},e.prototype.trackDelivery=function(e){return r.__awaiter(this,void 0,Promise,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,this.settingsRepository.getSettings()];case 1:return t=r.sent(),[4,this.getFetch()(this.buildUri("/web-push/track-delivery",t),this.makeApiPostRequest(e,t))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.Logger.LogAndThrowException(n),[3,4];case 4:return[2]}}))}))},e.prototype.trackApplicationInstall=function(e){return this.sendOperation(i.WebPushOperation.ApplicationInstalled,e)},e.prototype.trackApplicationDataUpdate=function(e){return this.sendOperation(i.WebPushOperation.ApplicationDataUpdated,e)},e.prototype.sendOperation=function(e,t){return r.__awaiter(this,void 0,Promise,(function(){var n,i,s,a,c;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,this.settingsRepository.getSettings()];case 1:return n=r.sent(),(i=new FormData).append("operation",e),i.append("deviceUUID",n.deviceUUID),i.append("originDomain",n.originDomain),i.append("data",JSON.stringify(t)),n.endpointId&&i.append("endpointId",n.endpointId),s=["version="+this.version,"moduleVersion="+this.moduleInfo.version,"operation="+e,"deviceUUID="+n.deviceUUID,"originDomain="+n.originDomain],n.endpointId&&s.push("endpointId="+n.endpointId),[4,this.getFetch()(this.buildUri("/v3/js/operations/async?"+s.join("&"),n),{method:"POST",body:i})];case 2:return(a=r.sent()).ok?[2]:(o.Logger.LogAndThrowException(new Error("Status: "+a.status+", "+a.statusText)),[3,4]);case 3:return c=r.sent(),o.Logger.LogAndThrowException(c),[3,4];case 4:return[2]}}))}))},e.prototype.makeApiPostRequest=function(e,t){var n=r.__assign({originDomain:t.originDomain,endpointId:t.endpointId},e);return{method:"POST",headers:this.getHeaders(),body:JSON.stringify(n)}},e}();t.WebpushApiIntegrationController=c},4096:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerActionCreationType=t.WebPushPermissionState=t.WebPushOperation=void 0,function(e){e.ApplicationInstalled="WebPush.ApplicationInstalled",e.ApplicationDataUpdated="WebPush.ApplicationDataUpdated",e.TrackClick="WebPush.TrackClick"}(t.WebPushOperation||(t.WebPushOperation={})),function(e){e.Default="Default",e.Denied="Denied",e.Granted="Granted"}(t.WebPushPermissionState||(t.WebPushPermissionState={})),function(e){e.Subscribe="Subscribe",e.RestoreSubscription="RestoreSubscription"}(t.CustomerActionCreationType||(t.CustomerActionCreationType={}))},4514:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Firebase=void 0;var r=n(655).__importDefault(n(1923));n(7802),t.Firebase=r.default},7003:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4514);Object.defineProperty(t,"Firebase",{enumerable:!0,get:function(){return r.Firebase}})},6870:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDbRepository=void 0;var r=n(655),o=n(1875),i=function(){function e(e,t){this.store=e,this.key=t}return e.prototype.save=function(e){return r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,o.set(this.key,e,this.store)];case 1:return t.sent(),[2]}}))}))},e.prototype.tryGet=function(){return r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,o.get(this.key,this.store)];case 1:return[2,e.sent()]}}))}))},e.prototype.update=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,o.update(this.key,e,this.store)];case 1:return[2,t.sent()]}}))}))},e.prototype.get=function(){return r.__awaiter(this,void 0,Promise,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,o.get(this.key,this.store)];case 1:if(null==(e=t.sent()))throw new Error("could not find value for key '"+this.key+"'");return[2,e]}}))}))},e.prototype.getStringifiedData=function(){return r.__awaiter(this,void 0,Promise,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,o.get(this.key,this.store)];case 1:return(e=t.sent())?[2,JSON.stringify(e)]:[3,3];case 2:return t.sent(),[3,3];case 3:return[2,""]}}))}))},e}();t.IndexedDbRepository=i},9148:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MindboxStore=void 0;var r=n(1875),o=function(){function e(t){if(null==t)throw new Error("'storeName' cannot be null");this.store=r.createStore(e.dbName,t)}return e.dbName="mindbox",e}();t.MindboxStore=o},6689:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceWorkerStore=void 0;var r=n(655),o=function(e){function t(){return e.call(this,t.storeName)||this}return r.__extends(t,e),t.storeName="service-worker",t}(n(9148).MindboxStore);t.ServiceWorkerStore=(new o).store},2797:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(6870);Object.defineProperty(t,"IndexedDbRepository",{enumerable:!0,get:function(){return r.IndexedDbRepository}});var o=n(6689);Object.defineProperty(t,"ServiceWorkerStore",{enumerable:!0,get:function(){return o.ServiceWorkerStore}})},1330:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebpushModule=void 0;var r=n(641),o=n(4253),i=n(1588),s=n(4647),a=n(3049),c=n(2231),u=n(7463),l=n(9807),d=new u.IntegrationDoctor({logger:u.ConsoleLogger,serviceWorkerContainer:l.webpushSWContainer,firebaseDatabaseDoctor:new u.FirebaseDatabaseDoctor(u.ConsoleLogger,(function(e){return new u.FirebaseDatabaseFacade(e,u.ConsoleLogger)}))});t.WebpushModule={create:r.create,migrate:o.migrate,checkPermission:i.checkPermission,requestPermission:s.requestPermission,subscribe:a.subscribe,getDiagnosticsInfo:c.getDiagnosticsInfo,__tryRepairIntegration:function(e,t,n){return d.tryRepairIntegration(e,n)}}},9832:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.addDebugHelper=t.webpushModuleInfo=void 0;t.webpushModuleInfo={name:"webpush",src:"webpush.js",modernSrc:"webpush.modern.js",version:"1.19.72",isSupportedByBrowser:function(){return navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")&&("https:"==window.location.protocol||["localhost","127.0.0.1",""].some((function(e){return e===window.location.hostname})))},requiresSdkInitialization:function(){return!0}},t.addDebugHelper=function(e,t){var n="__mindboxDebugHelpers",r=window[n];null==r&&(window[n]=r={});var o="webpush",i=r[o];null==i&&(r[o]=i={}),null!=i[e]||(i[e]=t)}},6999:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},9811:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationPermissionManager=void 0;var n=function(){function e(){this.browserApi=Notification}return e.prototype.getPermissionState=function(){return this.browserApi.permission},e.prototype.isPermissionGranted=function(){return"granted"==this.getPermissionState()},e.prototype.isPermissionDefault=function(){return"default"==this.getPermissionState()},e.prototype.requestPermission=function(){return this.browserApi.requestPermission()},e}();t.NotificationPermissionManager=new n},5010:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationsController=void 0;var r=n(655),o=n(1041),i=function(){function e(e,t){this.createNotification=function(e){var t=JSON.parse(e.actions),n=t.map((function(e){return{action:e.buttonGuid,title:e.title}})),r=t.map((function(e){return{guid:e.buttonGuid,url:e.url}})),o={transactionalId:e.transactionalId,bodyGuid:e.bodyGuid,clickAction:e.clickAction,actions:r};return{body:e.body,icon:e.icon,tag:e.tag,image:e.image,badge:e.badge,requireInteraction:e.shouldRequireInteraction,data:o,actions:n}},null==e&&o.Logger.LogAndThrowException(new Error("'notificationRendererProvider' cannot be null")),null==t&&o.Logger.LogAndThrowException(new Error("'trackingService' cannot be null")),this.notificationRendererProvider=e,this.trackingService=t}return e.prototype.showNotification=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,s;return r.__generator(this,(function(r){switch(r.label){case 0:return null==e&&o.Logger.LogAndThrowException(new Error("'notificationData' cannot be null")),t=e.data,n=t.title,i=this.createNotification(t),[4,this.notificationRendererProvider()];case 1:return s=r.sent(),this.trackingService.trackDelivery(i.data.transactionalId),[4,s.showNotification(n,i)];case 2:return r.sent(),[2]}}))}))},e}();t.NotificationsController=i},3629:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WindowNotificationsController=void 0;var r=n(655),o=function(e){function t(t,n){return e.call(this,t,n)||this}return r.__extends(t,e),t}(n(5010).NotificationsController);t.WindowNotificationsController=o},8266:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),o=n(5010);Object.defineProperty(t,"NotificationsController",{enumerable:!0,get:function(){return o.NotificationsController}});var i=n(3629);Object.defineProperty(t,"WindowNotificationsController",{enumerable:!0,get:function(){return i.WindowNotificationsController}});var s=n(9811);Object.defineProperty(t,"NotificationPermissionManager",{enumerable:!0,get:function(){return s.NotificationPermissionManager}}),r.__exportStar(n(6999),t)},2284:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsRepository=void 0;var r=n(655),o=n(2797),i=function(e){function t(){return e.call(this,o.ServiceWorkerStore,t.settingsKey)||this}return r.__extends(t,e),t.prototype.saveSettings=function(e){return r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.save(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.getSettings=function(){return r.__awaiter(this,void 0,Promise,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this.get()];case 1:return e=n.sent(),t.validateSettings(e),[2,e]}}))}))},t.settingsKey="service-worker-settings",t.validateSettings=function(e){if(null==e)throw new Error("'settings' cannot be null");if(null==e.apiUri)throw new Error("'apiUri' cannot be null");if(null==e.originDomain)throw new Error("'originDomain' cannot be null");if(null==e.deviceUUID)throw new Error("'deviceUUID' cannot be null")},t}(o.IndexedDbRepository);t.SettingsRepository=new i},928:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2284);Object.defineProperty(t,"SettingsRepository",{enumerable:!0,get:function(){return r.SettingsRepository}})},6753:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StateRepository=void 0;var r=n(655),o=n(2797),i=function(e){function t(n){return e.call(this,o.ServiceWorkerStore,t.statePrefix+"-"+n)||this}return r.__extends(t,e),t.statePrefix="webpush",t}(o.IndexedDbRepository);t.StateRepository=i},715:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingService=void 0;var r=n(655),o=n(1041),i=n(6888),s=function(){function e(e){null==e&&o.Logger.LogAndThrowException(new Error("'integrationController' cannot be null")),this.integrationController=e}return e.prototype.trackClick=function(e,t,n,s){return r.__awaiter(this,void 0,Promise,(function(){var a,c,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:null==e&&o.Logger.LogAndThrowException(new Error("'transactionalId' cannot be null")),console.debug("[Mindbox.SDK] <webpush> tracked click for '"+e+"@"+t+"'"),r.label=1;case 1:return r.trys.push([1,3,,4]),a={messageTransactionalId:e,clickId:s,clickUrl:n},[4,new i.PromiseWithRetries((function(){return u.integrationController.trackClick(a)})).execute()];case 2:return[2,r.sent()];case 3:return c=r.sent(),o.Logger.LogAndThrowException(c),[3,4];case 4:return[2]}}))}))},e.prototype.trackDelivery=function(e){return r.__awaiter(this,void 0,Promise,(function(){var t,n,s=this;return r.__generator(this,(function(r){switch(r.label){case 0:null==e&&o.Logger.LogAndThrowException(new Error("'transactionalId' cannot be null")),console.debug("[Mindbox.SDK] <webpush> tracked delivery for '"+e+"'"),r.label=1;case 1:return r.trys.push([1,3,,4]),t={message:{transactionalId:e}},[4,new i.PromiseWithRetries((function(){return s.integrationController.trackDelivery(t)})).execute()];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.Logger.LogAndThrowException(n),[3,4];case 4:return[2]}}))}))},e}();t.TrackingService=s},3897:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.webpushSWContainer=t.WebpushSWContainer=void 0;var r=n(655),o=n(4240),i=n(1041),s=function(){function e(e){void 0===e&&(e=navigator.serviceWorker),this.pathHelper=o.workerPathHelper,this.serviceWorker=e}return e.prototype.getWorkerFromRegistration=function(e){return e.installing||e.waiting||e.active},e.prototype.waitRegistrationActivation=function(e){var t=this.getWorkerFromRegistration(e);return new Promise((function(n){if(t)if("activated"!==t.state)if("redundant"!==t.state){var r=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;n(null)}t.removeEventListener("statechange",r)};t.addEventListener("statechange",r)}else n(null);else n(e);else n(null)}))},e.prototype.register=function(t){var n=t.scope,o=void 0===n?e.defaultScope:n,s=t.path,a=t.firebaseMessagingSenderId,c=t.workerVersionsStateRepository,u=t.moduleInfo;return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,l;return r.__generator(this,(function(r){switch(r.label){case 0:return e=this.pathHelper.getFullPath({path:s,moduleVersion:u.version,firebaseMessagingSenderId:a}),[4,c.isWorkerModuleVersionGtOrEq(u.version)];case 1:return t=r.sent(),[4,this.getRegistration()];case 2:return n=r.sent(),console.debug("[Mindbox.SDK] <"+u.name+'> try to register service-worker: url="'+e+'", scope: "'+o+'"'),[4,this.serviceWorker.register(e,{scope:o,updateViaCache:t?"imports":"none"})];case 3:return l=r.sent(),n&&l.scope!==n.scope&&(i.Logger.LogException(new Error(JSON.stringify({scopeBefore:l.scope,scopeAfter:n.scope}))),n.unregister()),[2,l]}}))}))},e.prototype.getRegistration=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this.serviceWorker.getRegistrations()];case 1:return e=n.sent(),[2,e.find((function(e){var n=t.getWorkerFromRegistration(e);return t.pathHelper.isPathMatched(null==n?void 0:n.scriptURL)}))||null]}}))}))},e.prototype.getActiveServiceWorkerRegistration=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.getRegistration()];case 1:return(e=t.sent())?[4,this.waitRegistrationActivation(e)]:[2,null];case 2:return[2,t.sent()]}}))}))},e.defaultScope="/",e}();t.WebpushSWContainer=s,t.webpushSWContainer=new s},9807:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(3897);Object.defineProperty(t,"webpushSWContainer",{enumerable:!0,get:function(){return r.webpushSWContainer}}),Object.defineProperty(t,"WebpushSWContainer",{enumerable:!0,get:function(){return r.WebpushSWContainer}})},4240:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4715);Object.defineProperty(t,"workerPathHelper",{enumerable:!0,get:function(){return r.workerPathHelper}})},4715:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.workerPathHelper=void 0;var n=function(){function e(){}return e.prototype.checkVersion=function(t){if(new RegExp(e.versionRegExpString).test(t))return!0;throw new Error("incorrect module version: "+t+', should be like "1.1.1"')},e.prototype.getFullPath=function(t){var n=t.path,r=void 0===n?e.defaultServiceWorkerPath:n,o=t.moduleVersion,i=t.firebaseMessagingSenderId;this.checkVersion(o);var s="&"+e.versionParamName+"="+o;return r+"?"+e.messagingSenderIdParamName+"="+i+s},e.prototype.isPathMatched=function(t){return new RegExp(".+?"+e.messagingSenderIdParamName+"=.+&"+e.versionParamName+"="+e.versionRegExpString).test(t)},e.messagingSenderIdParamName="messagingSenderId",e.versionParamName="version",e.defaultServiceWorkerPath="/mindbox-services-worker.js",e.versionRegExpString="\\d+\\.\\d+\\.\\d+",e}();t.workerPathHelper=new n},292:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isWebpushWorkerCommandMessage=t.CommandTypeName=void 0,function(e){e.RequestApplicationDataUpdate="requestApplicationDataUpdate"}(t.CommandTypeName||(t.CommandTypeName={})),t.isWebpushWorkerCommandMessage=function(e){return null!=e.commandType}},5210:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebpushWorkerCommunicator=void 0;var r=n(655),o=n(292),i=function(){function e(e){var t=this;this.postMessage=function(e){return r.__awaiter(t,void 0,Promise,(function(){var t=this;return r.__generator(this,(function(n){return[2,new Promise((function(n,o){return r.__awaiter(t,void 0,void 0,(function(){var t,i,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(t=new MessageChannel).port1.onmessage=function(e){!0!==e.data.ok?o(new Error("Error: "+JSON.stringify(e.data))):n()},[4,this.webpushSWContainer.getActiveServiceWorkerRegistration()];case 1:return i=r.sent(),(s=null==i?void 0:i.active)?s.postMessage({type:"message",data:e},[t.port2]):(console.debug("[Mindbox.SDK] <webpush> ServiceWorker controller was null."),n()),[2]}}))}))}))]}))}))},this.webpushSWContainer=e}return e.prototype.requestApplicationDataUpdate=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return console.debug("[Mindbox.SDK] <webpush> post 'applicationDataUpdate'."),[2,this.postMessage({commandType:o.CommandTypeName.RequestApplicationDataUpdate,data:{isSubscriptionRestoreRequired:e}})]}))}))},e}();t.WebpushWorkerCommunicator=i},2364:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(5210);Object.defineProperty(t,"WebpushWorkerCommunicator",{enumerable:!0,get:function(){return r.WebpushWorkerCommunicator}});var o=n(292);Object.defineProperty(t,"isWebpushWorkerCommandMessage",{enumerable:!0,get:function(){return o.isWebpushWorkerCommandMessage}})},2210:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.applicationDataStateRepository=void 0;var r=n(655),o=function(e){function t(){var n=e.call(this,t.applicationDataStateKey)||this;return n.tryGetApplicationDataState=n.tryGet,n}return r.__extends(t,e),t.prototype.updateApplicationDataState=function(e){return r.__awaiter(this,void 0,Promise,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this.update((function(n){return t=e(n)}))];case 1:return n.sent(),[2,t]}}))}))},t.applicationDataStateKey="application",t}(n(6753).StateRepository);t.applicationDataStateRepository=new o},3192:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2210);Object.defineProperty(t,"applicationDataStateRepository",{enumerable:!0,get:function(){return r.applicationDataStateRepository}})},1588:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.checkPermission=void 0;var r=n(5178),o=n(8266);t.checkPermission=function(e,t,n){if(!r.isFirebaseInitialized())return Promise.reject(new Error("[Mindbox.SDK] <webpush> Module is not initialized."));if(null==n)throw new Error('[Mindbox.SDK] <webpush> params for command "checkPermission" not set.');if("function"!=typeof n.onGranted)throw new Error('[Mindbox.SDK] <webpush> onGranted for command "checkPermission" not set.');if("function"!=typeof n.onDenied)throw new Error('[Mindbox.SDK] <webpush> onDenied for command "checkPermission" not set.');if("function"!=typeof n.onDefault)throw new Error('[Mindbox.SDK] <webpush> onDefault for command "checkPermission" not set.');return new Promise((function(e,t){switch(o.NotificationPermissionManager.getPermissionState()){case"granted":n.onGranted();break;case"denied":n.onDenied();break;case"default":n.onDefault()}e()}))}},4714:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.getCreateRequestsCount=void 0;var r=n(655),o=n(2726),i=n(5178),s=n(2364),a=n(1041),c=n(9832),u=n(9807),l=0;t.getCreateRequestsCount=function(){return l},t.create=function(e,t){return r.__awaiter(void 0,void 0,Promise,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return console.debug("[Mindbox.SDK] <webpush> moduleVersion="+c.webpushModuleInfo.version),++l,o.isSupported()?i.isFirebaseInitialized()?[2,Promise.reject(new Error("[Mindbox.SDK] <webpush> Module is already initialized."))]:[4,i.initializeFirebase({settings:e,originDomain:location.host,deviceUUID:t,webpushSWContainer:u.webpushSWContainer})]:[2,Promise.reject(new Error("[Mindbox.SDK] <webpush> Module is not supported by current browser."))];case 1:return r.sent(),n=new s.WebpushWorkerCommunicator(u.webpushSWContainer),c.addDebugHelper("workerCommunicator",n),console.debug("[Mindbox.SDK] <webpush> update application data state on create."),n.requestApplicationDataUpdate().catch(a.Logger.LogException),[2]}}))}))}},641:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4714);Object.defineProperty(t,"create",{enumerable:!0,get:function(){return r.create}}),Object.defineProperty(t,"getCreateRequestsCount",{enumerable:!0,get:function(){return r.getCreateRequestsCount}})},2231:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getDiagnosticsInfo=void 0;var r=n(655),o=n(641);t.getDiagnosticsInfo=function(e,t,n){return r.__awaiter(void 0,void 0,Promise,(function(){return r.__generator(this,(function(t){return n({createRequestsCount:o.getCreateRequestsCount(),firebaseMessagingSenderId:e.firebaseMessagingSenderId,serviceWorkerPath:e.serviceWorkerPath,serviceWorkerScope:e.serviceWorkerScope}),[2]}))}))}},4253:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.migrate=void 0;var r=n(655);t.migrate=function(){return r.__awaiter(void 0,void 0,Promise,(function(){return r.__generator(this,(function(e){return console.debug("[Mindbox.SDK] <webpush> \"mindbox('webpush.migrate', ...)\" is no longer required"),[2]}))}))}},4647:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.requestPermission=void 0;var r=n(655),o=n(5178);t.requestPermission=function(e,t,n){return r.__awaiter(void 0,void 0,Promise,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:if(!o.isFirebaseInitialized())throw new Error("[Mindbox.SDK] <webpush> Module is not initialized.");if(null==n)throw new Error('[Mindbox.SDK] <webpush> params for command "requestPermission" not set.');if("function"!=typeof n.onGranted)throw new Error('[Mindbox.SDK] <webpush> onGranted for command "requestPermission" not set.');if("function"!=typeof n.onDenied)throw new Error('[Mindbox.SDK] <webpush> onDenied for command "requestPermission" not set.');return[4,Notification.requestPermission()];case 1:switch(e.sent()){case"granted":n.onGranted();break;case"denied":n.onDenied();break;case"default":null!=n.onDefault&&"function"==typeof n.onDefault&&n.onDefault()}return[2]}}))}))}},3049:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4637);Object.defineProperty(t,"subscribe",{enumerable:!0,get:function(){return r.subscribe}})},4637:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.subscribe=void 0;var r=n(655),o=n(5178),i=n(5210),s=n(1041),a=n(8266),c=n(9807);t.subscribe=function(e,t,n){return r.__awaiter(void 0,void 0,Promise,(function(){var e,t;return r.__generator(this,(function(r){switch(r.label){case 0:if(!o.isFirebaseInitialized())return[2,Promise.reject(new Error("[Mindbox.SDK] <webpush> Module is not initialized."))];if(null==n)throw new Error('[Mindbox.SDK] <webpush> params for command "subscribe" not set.');if("function"!=typeof n.onGranted)throw new Error('[Mindbox.SDK] <webpush> onGranted for command "subscribe" not set.');if("function"!=typeof n.onDenied)throw new Error('[Mindbox.SDK] <webpush> onDenied for command "subscribe" not set.');return e=new i.WebpushWorkerCommunicator(c.webpushSWContainer),[4,a.NotificationPermissionManager.requestPermission()];case 1:switch(t=r.sent(),e.requestApplicationDataUpdate(!1).catch(s.Logger.LogException),t){case"granted":return n.onGranted(),[2];case"denied":return n.onDenied(),[2]}return[2]}}))}))}},2658:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseDatabaseDoctor=void 0;var r=n(655),o=n(2918),i=function(){function e(e,t){this.logger=e,this.firebaseDatabaseFacadeFactory=t}return e.prototype.checkFirebaseDatabases=function(e){return r.__awaiter(this,void 0,Promise,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return this.debug("checking firebase databases"),[4,this.checkDatabase({databaseName:"fcm_token_details_db",storeName:"fcm_token_object_Store"},(function(t){return(null==t?void 0:t.fcmSenderId)===e.firebaseSenderId}))];case 1:return t=r.sent(),[4,this.checkDatabase({databaseName:"fcm_vapid_details_db",storeName:"fcm_vapid_object_Store"},(function(e){return null!=e}))];case 2:return n=r.sent(),t===o.DatabaseCheckResult.OK&&n===o.DatabaseCheckResult.OK?[2,o.DatabaseCheckResult.OK]:t===o.DatabaseCheckResult.Broken||n===o.DatabaseCheckResult.Broken?[2,o.DatabaseCheckResult.Broken]:[2,o.DatabaseCheckResult.Unknown]}}))}))},e.prototype.tryRepairDatabase=function(){return r.__awaiter(this,void 0,Promise,(function(){var e,t,n,o;return r.__generator(this,(function(r){switch(r.label){case 0:return this.debug("trying to repair firebase databases"),e=this.firebaseDatabaseFacadeFactory({databaseName:"fcm_token_details_db",storeName:"fcm_token_object_Store"}),t=this.firebaseDatabaseFacadeFactory({databaseName:"fcm_vapid_details_db",storeName:"fcm_vapid_object_Store"}),[4,e.drop()];case 1:return n=r.sent(),[4,t.drop()];case 2:return o=r.sent(),[2,n&&o]}}))}))},e.prototype.checkDatabase=function(e,t){return r.__awaiter(this,void 0,Promise,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return this.debug("checking "+e.databaseName),[4,this.firebaseDatabaseFacadeFactory(e).checkScopeData(t)];case 1:return n=r.sent(),this.debug("check result: "+n),[2,n]}}))}))},e.prototype.debug=function(e){this.logger.debug("[Mindbox.SDK] <FirebaseDatabaseDoctor> "+e)},e}();t.FirebaseDatabaseDoctor=i},2918:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseDatabaseFacade=t.DatabaseCheckResult=void 0;var r,o=n(655),i=n(3029),s=n(8995);!function(e){e.OK="OK",e.Broken="BROKEN",e.Unknown="UNKNOWN"}(r||(r={})),t.DatabaseCheckResult=r;var a=function(){function e(e,t){this.getKeyAkaScope=function(){return location.origin+"/"},this.databaseNames=e,this.logger=t}return e.prototype.checkScopeData=function(e){return o.__awaiter(this,void 0,Promise,(function(){var t,n,s,a;return o.__generator(this,(function(o){switch(o.label){case 0:t=null,o.label=1;case 1:return o.trys.push([1,4,5,6]),this.debug("opening IDB"),[4,i.openDB(this.databaseNames.databaseName)];case 2:return t=o.sent(),t.objectStoreNames.contains(this.databaseNames.storeName)?(this.debug("checking scope data"),[4,t.get(this.databaseNames.storeName,this.getKeyAkaScope())]):(this.logger.debug("object store not found"),[2,r.Broken]);case 3:return n=o.sent(),s=e(n),this.debug("scope data is valid: "+s),[2,s?r.OK:r.Broken];case 4:return a=o.sent(),this.debug("failed to check database"),this.logger.debug(a),[2,r.Unknown];case 5:return null==t||t.close(),[7];case 6:return[2]}}))}))},e.prototype.drop=function(){return o.__awaiter(this,void 0,Promise,(function(){var e,t,n,r=this;return o.__generator(this,(function(o){switch(o.label){case 0:return this.debug("deleting IDB"),e=!1,t=!1,n=i.deleteDB(this.databaseNames.databaseName,{blocked:function(){r.debug("failed to deleted blocked database"),t=!0}}).then((function(){r.debug("database deleted successfully: "+!t),e=!t})),[4,Promise.race([s.sleep(1313),n])];case 1:return o.sent(),this.debug("database deleted successfully: "+e),[2,e]}}))}))},e.prototype.debug=function(e){this.logger.debug("[Mindbox.SDK] <FirebaseDatabaseFacade> ["+this.databaseNames.databaseName+"] "+e)},e}();t.FirebaseDatabaseFacade=a},812:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IntegrationDoctor=void 0;var r=n(655),o=n(2918),i=function(){function e(e){var t=e.logger,n=e.serviceWorkerContainer,r=e.firebaseDatabaseDoctor;this.logger=t,this.serviceWorkerContainer=n,this.firebaseDatabaseDoctor=r}return e.prototype.tryRepairIntegration=function(e,t){var n,i;return r.__awaiter(this,void 0,Promise,(function(){var s,a;return r.__generator(this,(function(r){switch(r.label){case 0:return this.debug("checking repair required"),[4,this.firebaseDatabaseDoctor.checkFirebaseDatabases({firebaseSenderId:""+e.firebaseMessagingSenderId})];case 1:switch(s=r.sent(),s){case o.DatabaseCheckResult.OK:return[3,2];case o.DatabaseCheckResult.Broken:return[3,3];case o.DatabaseCheckResult.Unknown:return[3,6]}return[3,7];case 2:return this.debug("databases are OK, repair not required"),a=!0,[3,8];case 3:return this.debug("databases are BROKEN, repair required"),[4,this.unregisterServiceWorker()];case 4:return r.sent(),[4,this.firebaseDatabaseDoctor.tryRepairDatabase()];case 5:return a=r.sent(),[3,8];case 6:return this.debug("databases unchecked, assuming failed repair process"),a=!1,[3,8];case 7:throw new Error('Unknown database check result "'+s+'"');case 8:return a?(this.debug('calling "success"-callback'),null===(n=null==t?void 0:t.onSuccess)||void 0===n||n.call(t)):(this.debug('calling "fail"-callback'),null===(i=null==t?void 0:t.onFail)||void 0===i||i.call(t,"FAILED_TO_REPAIR_FIREBASE_DATABASES")),[2]}}))}))},e.prototype.unregisterServiceWorker=function(){return r.__awaiter(this,void 0,Promise,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this.debug("unregistering service worker"),[4,this.serviceWorkerContainer.getRegistration()];case 1:return null==(e=t.sent())?[3,3]:(this.debug("found sw, unregistering"),[4,e.unregister()]);case 2:return t.sent(),this.debug("sw unregistered"),[3,4];case 3:this.debug("no service workers found"),t.label=4;case 4:return[2]}}))}))},e.prototype.debug=function(e){this.logger.debug("[Mindbox.SDK] <IntegrationDoctor> "+e)},e}();t.IntegrationDoctor=i},5013:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=void 0,t.ConsoleLogger={debug:console.debug}},7463:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(5013);Object.defineProperty(t,"ConsoleLogger",{enumerable:!0,get:function(){return r.ConsoleLogger}});var o=n(812);Object.defineProperty(t,"IntegrationDoctor",{enumerable:!0,get:function(){return o.IntegrationDoctor}});var i=n(2658);Object.defineProperty(t,"FirebaseDatabaseDoctor",{enumerable:!0,get:function(){return i.FirebaseDatabaseDoctor}});var s=n(2918);Object.defineProperty(t,"FirebaseDatabaseFacade",{enumerable:!0,get:function(){return s.FirebaseDatabaseFacade}})},5178:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.initializeFirebase=t.isFirebaseInitialized=void 0;var r=n(655),o=n(7003),i=n(4722),s=n(9832),a=n(715),c=n(928),u=n(8266),l=n(1041),d=n(7621),p=n(2594),h=!1;t.isFirebaseInitialized=function(){return h},t.initializeFirebase=function(e){var t=e.settings,n=e.webpushSWContainer,a=e.originDomain,u=e.deviceUUID;return r.__awaiter(void 0,void 0,void 0,(function(){var e,l,p,y,v,b,_,w;return r.__generator(this,(function(r){switch(r.label){case 0:return e=t.endpointId,l=t.endpointSettings,p=(void 0===l?{}:l).features,y={messagingSenderId:f(t)},v=o.Firebase.initializeApp(y),s.addDebugHelper("firebaseApp",v),b=v.messaging(),s.addDebugHelper("firebaseMessaging",b),_=i.getEffectiveApiUri(t),w={apiUri:_,deviceUUID:u,endpointId:e,originDomain:a,features:p},[4,c.SettingsRepository.saveSettings(w)];case 1:return r.sent(),g({firebaseApp:v,webpushSWContainer:n}),[4,m({firebaseApp:v,settings:t,versionsStateRepository:d.workerVersionsStateRepository,webpushSWContainer:n})];case 2:return r.sent(),h=!0,s.addDebugHelper("trackerSettings",t),[2]}}))}))};var f=function(e){var t=e.firebaseMessagingSenderId;if(null==t)throw new Error("[Mindbox.SDK] <webpush> Module failed to start without messaging service. Probably, this feature is disabled for current website.");switch(typeof t){case"string":return t;case"number":return String(t);default:throw new Error("[Mindbox.SDK] <webpush> Invalid firebaseMessagingSenderId")}},m=function(e){var t=e.firebaseApp,n=e.versionsStateRepository,o=e.settings,i=e.webpushSWContainer;return r.__awaiter(void 0,void 0,void 0,(function(){var e,a,c,u,d;return r.__generator(this,(function(r){switch(r.label){case 0:e=o.serviceWorkerScope,a=o.firebaseMessagingSenderId,c=o.serviceWorkerPath,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,i.register({path:c,firebaseMessagingSenderId:a,scope:e||"/",workerVersionsStateRepository:n,moduleInfo:s.webpushModuleInfo})];case 2:return u=r.sent(),t.messaging().useServiceWorker(u),[3,4];case 3:throw d=r.sent(),l.Logger.LogException(d),d;case 4:return[2]}}))}))},g=function(e){var t=e.firebaseApp,n=e.webpushSWContainer,o=new p.WebpushApiIntegrationController({settingsRepository:c.SettingsRepository,getFetch:function(){return fetch}}),i=new a.TrackingService(o),l=new u.WindowNotificationsController((function(){return n.getActiveServiceWorkerRegistration()}),i);s.addDebugHelper("services",{integrationController:o,trackingService:i,notificationsController:l});t.messaging().onMessage((function(e){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return console.debug("[Mindbox.SDK] <webpush> received foreground message ",e),[4,l.showNotification(e)];case 1:return t.sent(),[2]}}))}))}))}},7621:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(368);Object.defineProperty(t,"workerVersionsStateRepository",{enumerable:!0,get:function(){return r.workerVersionsStateRepository}})},4984:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(420);Object.defineProperty(t,"versionGt",{enumerable:!0,get:function(){return r.versionGt}})},420:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.versionGt=void 0,t.versionGt=function(e,t){for(var n=e.split("."),r=t.split("."),o=!1,i=0;!o&&n.length>i;)o=Number(n[i])>Number(r[i]),i++;return o}},368:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.workerVersionsStateRepository=void 0;var r=n(655),o=n(6753),i=n(4984),s=function(e){function t(){var n=e.call(this,t.workerVersionsStateKey)||this;return n.saveState=n.save,n}return r.__extends(t,e),t.prototype.isWorkerModuleVersionGtOrEq=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.tryGet()];case 1:return t=r.sent(),(n=null==t?void 0:t.module)&&!i.versionGt(e,n)?[2,!0]:[2,!1]}}))}))},t.workerVersionsStateKey="worker-versions",t}(o.StateRepository);t.workerVersionsStateRepository=new s},1965:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseWithRetries=void 0;var r=n(655),o={retries:2,startDelay:100,delayRate:1},i=function(){function e(e,t){void 0===t&&(t={}),this.isCancelled=!1,this.getPromise=e,this.options=r.__assign(r.__assign({},o),t)}return e.prototype.execute=function(){return r.__awaiter(this,void 0,Promise,(function(){var e=this;return r.__generator(this,(function(t){return[2,new Promise((function(t,n){return r.__awaiter(e,void 0,void 0,(function(){var e,o,i,s=this;return r.__generator(this,(function(a){return e=this.options.retries,o=null,i=function(a){return r.__awaiter(s,void 0,void 0,(function(){var s,c,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(this.isCancelled)return t(null),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.getPromise()];case 2:return s=r.sent(),t(s),[2];case 3:return c=r.sent(),o=c,0===e?(n(o),[2]):(e--,[3,4]);case 4:return setTimeout((function(){var e=a*u.options.delayRate;i(e)}),a),[2]}}))}))},[2,i(this.options.startDelay)]}))}))}))]}))}))},e.prototype.cancel=function(){this.isCancelled=!0},e}();t.PromiseWithRetries=i},6888:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1965);Object.defineProperty(t,"PromiseWithRetries",{enumerable:!0,get:function(){return r.PromiseWithRetries}})},2904:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultServiceDomain=t.targetModern=t.version=void 0,t.version="1.0.598",t.targetModern=!1;var n="{serviceDomainDefinedByDeployment}";t.getDefaultServiceDomain=function(){return-1!=n.indexOf("serviceDomainDefinedByDeployment")?"api.mindbox.ru":n}},2:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Feature=void 0,t.Feature||(t.Feature={})},4722:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.compareSettings=t.getScriptsRoot=t.getEffectiveApiUri=void 0;var r=n(655);t.compareSettings=function(e,t){var n,i,s=new Array;try{for(var a=r.__values(Object.keys(e)),c=a.next();!c.done;c=a.next()){var u=c.value,l=o(u,e,t);null!=l&&s.push(l)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return 0===s.length?null:s};var o=function(e,t,n){var r;switch(e){case"serviceDomain":r=null;break;case"redirectedFrom":r=i(t[e],n[e])?null:"redirectedFrom objects are different";break;default:r=t[e]===n[e]?null:t[e]+" !== "+n[e]}return null==r?null:{key:e,message:r}},i=function(e,t){return e.requestUrl===t.requestUrl&&e.referrerUrl===t.referrerUrl},s=function(e){if(null==e)throw new Error("'settings' cannot be null");return(e.useHttp?"http":"https")+"://"+(null!=e.serviceDomain?e.serviceDomain:"api.mindbox.ru")};t.getEffectiveApiUri=s;t.getScriptsRoot=function(e){return s(e)}},655:function(e,t,n){n.r(t),n.d(t,{__assign:function(){return i},__asyncDelegator:function(){return _},__asyncGenerator:function(){return b},__asyncValues:function(){return w},__await:function(){return v},__awaiter:function(){return l},__classPrivateFieldGet:function(){return T},__classPrivateFieldSet:function(){return x},__createBinding:function(){return p},__decorate:function(){return a},__exportStar:function(){return h},__extends:function(){return o},__generator:function(){return d},__importDefault:function(){return E},__importStar:function(){return k},__makeTemplateObject:function(){return S},__metadata:function(){return u},__param:function(){return c},__read:function(){return m},__rest:function(){return s},__spread:function(){return g},__spreadArrays:function(){return y},__values:function(){return f}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function a(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function p(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function h(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=o[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:v(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function x(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,n),i.loaded=!0,i.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,o;r=n(1330),o=n(9832),n(2),window.mindbox[o.webpushModuleInfo.name]=r.WebpushModule}();